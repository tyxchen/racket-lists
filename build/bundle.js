!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=6)}([function(e,n,t){var o=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var n="",t=o.getRandomValues(new Uint8Array(e));0<e--;)n+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz~"[63&t[e]];return n}},function(e,n,t){var o=t(2);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(4)(o,r);o.locals&&(e.exports=o.locals)},function(e,n,t){(e.exports=t(3)(!1)).push([e.i,'body {\n    display: flex;\n    flex-direction: column;\n    font-family: sans-serif;\n    height: 100vh;\n    margin: 0;\n}\n\n.app-main {\n    flex: 1;\n    padding: 2em;\n    padding-bottom: 1em;\n}\n\n.app-output {\n    height: 300px;\n    padding: 2em;\n    padding-top: 1em;\n    border-top: 1px solid;\n}\n\n.boxy {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n}\n\n.boxy-car, .boxy-cdr {\n    position: relative;\n    min-width: 20px;\n    height: 20px;\n    background-color: white;\n    border: 1px solid;\n}\n\n.boxy-car:hover, .boxy-cdr:hover {\n    background-color: rgb(255, 255, 100);\n}\n\n.boxy + .boxy-wrapper {\n    margin-top: 10px;\n}\n\n.boxy-wrapper + .boxy-wrapper {\n    margin-top: 20px;\n}\n\n.boxy-car {\n    font-family: monospace;\n    line-height: 20px;\n    text-align: center;\n    padding: 0 4px;\n}\n\n.boxy-cdr:not(:last-child) {\n    margin-right: 20px;\n}\n\n.dragging {\n    position: fixed;\n    opacity: .7;\n    box-shadow: 0 0 15px gold;\n    z-index: 100;\n}\n\n.drag-active {\n    background-color: lightgreen !important;\n    box-shadow: 0 0 15px skyblue;\n}\n\nline {\n    stroke: black;\n}\n\n.downwards-arrow {\n    position: absolute;\n    top: 10px;\n    height: 100%;\n    width: 30px;\n    pointer-events: none;\n}\n\n.rightwards-arrow {\n    position: absolute;\n    left: 50%;\n    width: 31px;\n    height: 100%;\n    pointer-events: none;\n}\n\n.downwards-arrow svg {\n    position: absolute;\n    bottom: 0;\n}\n\n.rightwards-arrow svg {\n    position: absolute;\n    right: 0;\n}\n\n.downwards-arrow::before {\n    position: absolute;\n    left: calc(50% - 1px);\n    content: "";\n    width: 2px;\n    height: 100%;\n    background: black;\n}\n\n.rightwards-arrow::before {\n    position: absolute;\n    top: calc(50% - 1px);\n    content: "";\n    height: 2px;\n    width: 100%;\n    background: black;\n}\n\n.changeable-text {\n    width: 100%;\n    height: 100%;\n}\n\n.changeable-text span {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.output-highlighted, .view-highlighted {\n    background-color: rgb(255, 255, 100);\n}\n\n.output-outlined, .view-outlined {\n    outline: 2px solid gold;\n}\n\n.add-to-nodes,\n.dup-node,\n.delete-node {\n    display: inline-block;\n    margin-top: 20px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.add-to-nodes:hover,\n.dup-node:hover {\n    background: lightgreen;\n}\n\n.delete-node:hover {\n    background: salmon;\n}\n',""])},function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",o=e[3];if(!o)return t;if(n&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(o),i=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[t].concat(i).concat([r]).join("\n")}return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){var o={},r=function(e){var n;return function(){return void 0===n&&(n=e.apply(this,arguments)),n}}(function(){return window&&document&&document.all&&!window.atob}),i=function(e){var n={};return function(e,t){if("function"==typeof e)return e();if(void 0===n[e]){var o=function(e,n){return n?n.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}n[e]=o}return n[e]}}(),a=null,l=0,s=[],c=t(5);function u(e,n){for(var t=0;t<e.length;t++){var r=e[t],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(v(r.parts[a],n))}else{var l=[];for(a=0;a<r.parts.length;a++)l.push(v(r.parts[a],n));o[r.id]={id:r.id,refs:1,parts:l}}}}function d(e,n){for(var t=[],o={},r=0;r<e.length;r++){var i=e[r],a=n.base?i[0]+n.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(l):t.push(o[a]={id:a,parts:[l]})}return t}function f(e,n){var t=i(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=s[s.length-1];if("top"===e.insertAt)o?o.nextSibling?t.insertBefore(n,o.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),s.push(n);else if("bottom"===e.insertAt)t.appendChild(n);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=i(e.insertAt.before,t);t.insertBefore(n,r)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var n=s.indexOf(e);n>=0&&s.splice(n,1)}function h(e){var n=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return t.nc}();o&&(e.attrs.nonce=o)}return g(n,e.attrs),f(e,n),n}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function v(e,n){var t,o,r,i;if(n.transform&&e.css){if(!(i="function"==typeof n.transform?n.transform(e.css):n.transform.default(e.css)))return function(){};e.css=i}if(n.singleton){var s=l++;t=a||(a=h(n)),o=y.bind(null,t,s,!1),r=y.bind(null,t,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var n=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(n,e.attrs),f(e,n),n}(n),o=function(e,n,t){var o=t.css,r=t.sourceMap,i=void 0===n.convertToAbsoluteUrls&&r;(n.convertToAbsoluteUrls||i)&&(o=c(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}.bind(null,t,n),r=function(){p(t),t.href&&URL.revokeObjectURL(t.href)}):(t=h(n),o=function(e,n){var t=n.css,o=n.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,t),r=function(){p(t)});return o(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;o(e=n)}else r()}}e.exports=function(e,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(n=n||{}).attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=r()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var t=d(e,n);return u(t,n),function(e){for(var r=[],i=0;i<t.length;i++){var a=t[i];(l=o[a.id]).refs--,r.push(l)}e&&u(d(e,n),n);for(i=0;i<r.length;i++){var l;if(0===(l=r[i]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete o[l.id]}}}};var m=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function y(e,n,t,o){var r=t?"":o.css;if(e.styleSheet)e.styleSheet.cssText=m(n,r);else{var i=document.createTextNode(r),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(i,a[n]):e.appendChild(i)}}},function(e,n){e.exports=function(e){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=n.protocol+"//"+n.host,o=t+n.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,n){var r,i=n.trim().replace(/^"(.*)"$/,function(e,n){return n}).replace(/^'(.*)'$/,function(e,n){return n});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?t+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,n,t){"use strict";t.r(n);var o=Array.isArray;function r(e){var n=typeof e;return"string"===n||"number"===n}function i(e){return u(e)||c(e)}function a(e){return c(e)||!1===e||function(e){return!0===e}(e)||u(e)}function l(e){return"function"==typeof e}function s(e){return"string"==typeof e}function c(e){return null===e}function u(e){return void 0===e}function d(e,n){var t={};if(e)for(var o in e)t[o]=e[o];if(n)for(var r in n)t[r]=n[r];return t}var f={},p=[];function h(e,n){e.appendChild(n)}function g(e,n,t){c(t)?h(e,n):e.insertBefore(n,t)}function v(e,n){e.removeChild(n)}function m(e){for(var n;void 0!==(n=e.shift());)n()}function y(e){for(var n,t;e;){if(2033&(n=e.flags))return e.dom;t=e.children,e=8192&n?2===e.childFlags?t:t[0]:4&n?t.$LI:t}return null}function b(e,n){var t=e.flags;if(2033&t)v(n,e.dom);else{var o=e.children;if(4&t)b(o.$LI,n);else if(8&t)b(o,n);else if(8192&t)if(2===e.childFlags)b(o,n);else for(var r=0,i=o.length;r<i;r++)b(o[r],n)}}function w(e,n,t){var o=e.flags;if(2033&o)g(n,e.dom,t);else{var r=e.children;if(4&o)w(r.$LI,n,t);else if(8&o)w(r,n,t);else if(8192&o)if(2===e.childFlags)w(r,n,t);else for(var i=0,a=r.length;i<a;i++)w(r[i],n,t)}}function x(e,n,t){return e.constructor.getDerivedStateFromProps?d(t,e.constructor.getDerivedStateFromProps(n,t)):t}var N={componentComparator:null,createVNode:null,renderComplete:null},k="$";function S(e,n,t,o,r,i,a,l){this.childFlags=e,this.children=n,this.className=t,this.dom=null,this.flags=o,this.key=void 0===r?null:r,this.props=void 0===i?null:i,this.ref=void 0===a?null:a,this.type=l}function C(e,n,t,o,r,i,a,s){var c=void 0===r?1:r,u=new S(c,o,t,e,a,i,s,n),d=N.createVNode;return l(d)&&d(u),0===c&&I(u,u.children),u}function $(e,n,t,o,r){0!=(2&e)&&(n.prototype&&n.prototype.render?e=4:n.render?(e=32776,n=n.render):e=8);var a=n.defaultProps;if(!i(a))for(var s in t||(t={}),a)u(t[s])&&(t[s]=a[s]);if((8&e)>0&&0==(32768&e)){var c=n.defaultHooks;if(!i(c))if(r)for(var d in c)u(r[d])&&(r[d]=c[d]);else r=c}var f=new S(1,null,null,e,o,t,r,n),p=N.createVNode;return l(p)&&p(f),f}function U(e,n){return new S(1,i(e)?"":e,null,16,n,null,null,null)}function A(e,n,t){var o=C(8192,8192,null,e,n,null,t,null);switch(o.childFlags){case 1:o.children=M(),o.childFlags=2;break;case 16:o.children=[U(e)],o.childFlags=4}return o}function L(e){var n=-81921&e.flags,t=e.props;if(14&n&&!c(t)){var o=t;for(var r in t={},o)t[r]=o[r]}return 0==(8192&n)?new S(e.childFlags,e.children,e.className,n,e.key,t,e.ref,e.type):function(e){var n,t=e.children,o=e.childFlags;if(2===o)n=L(t);else if(12&o){n=[];for(var r=0,i=t.length;r<i;r++)n.push(L(t[r]))}return A(n,o,e.key)}(e)}function M(){return U("",null)}function P(e,n,t,i){for(var l=e.length;t<l;t++){var u=e[t];if(!a(u)){var d=i+k+t;if(o(u))P(u,n,0,d);else{if(r(u))u=U(u,d);else{var f=u.key,p=s(f)&&f[0]===k;(81920&u.flags||p)&&(u=L(u)),u.flags|=65536,c(f)||p?u.key=d:u.key=i+f}n.push(u)}}}}function I(e,n){var t,i=1;if(a(n))t=n;else if(r(n))i=16,t=n;else if(o(n)){for(var l=n.length,u=0;u<l;u++){var d=n[u];if(a(d)||o(d)){P(n,t=t||n.slice(0,u),u,"");break}if(r(d))(t=t||n.slice(0,u)).push(U(d,k+u));else{var f=d.key,p=(81920&d.flags)>0,h=c(f),g=!h&&s(f)&&f[0]===k;p||h||g?(t=t||n.slice(0,u),(p||g)&&(d=L(d)),(h||g)&&(d.key=k+u),t.push(d)):t&&t.push(d),d.flags|=65536}}i=0===(t=t||n).length?1:8}else(t=n).flags|=65536,81920&n.flags&&(t=L(n)),i=2;return e.children=t,e.childFlags=i,e}var O="http://www.w3.org/1999/xlink",D="http://www.w3.org/XML/1998/namespace",F={"xlink:actuate":O,"xlink:arcrole":O,"xlink:href":O,"xlink:role":O,"xlink:show":O,"xlink:title":O,"xlink:type":O,"xml:base":D,"xml:lang":D,"xml:space":D},R={},j={};function B(e,n,t){var o=t.$EV;n?(R[e]||(j[e]=function(e){var n=function(n){var t="onClick"===e||"onDblClick"===e;if(t&&0!==n.button)n.stopPropagation();else{n.stopPropagation=E;var o={dom:document};Object.defineProperty(n,"currentTarget",{configurable:!0,get:function(){return o.dom}}),function(e,n,t,o,r){var i=n;for(;!c(i);){if(t&&i.disabled)return;var a=i.$EV;if(a){var l=a[o];if(l&&(r.dom=i,l.event?l.event(l.data,e):l(e),e.cancelBubble))return}i=i.parentNode}}(n,n.target,t,e,o)}};return document.addEventListener(T(e),n),n}(e),R[e]=0),o||(o=t.$EV={}),o[e]||R[e]++,o[e]=n):o&&o[e]&&(0==--R[e]&&(document.removeEventListener(T(e),j[e]),j[e]=null),o[e]=n)}function T(e){return e.substr(2).toLowerCase()}function E(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function q(e,n,t){if(e[n]){var o=e[n];o.event?o.event(o.data,t):o(t)}else{var r=n.toLowerCase();e[r]&&e[r](t)}}function V(e,n){var t=function(t){var o=this.$V;if(o){var r=o.props||f,i=o.dom;if(s(e))q(r,e,t);else for(var a=0;a<e.length;a++)q(r,e[a],t);if(l(n)){var c=this.$V,u=c.props||f;n(u,i,!1,c)}}};return Object.defineProperty(t,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),t}function X(e){return"checkbox"===e||"radio"===e}var _=V("onInput",H),Y=V(["onClick","onChange"],H);function W(e){e.stopPropagation()}function H(e,n){var t=e.type,o=e.value,r=e.checked,a=e.multiple,l=e.defaultValue,s=!i(o);t&&t!==n.type&&n.setAttribute("type",t),i(a)||a===n.multiple||(n.multiple=a),i(l)||s||(n.defaultValue=l+""),X(t)?(s&&(n.value=o),i(r)||(n.checked=r)):s&&n.value!==o?(n.defaultValue=o,n.value=o):i(r)||(n.checked=r)}function K(e,n){if("option"===e.type)!function(e,n){var t=e.props||f,r=e.dom;r.value=t.value,t.value===n||o(n)&&-1!==n.indexOf(t.value)?r.selected=!0:i(n)&&i(t.selected)||(r.selected=t.selected||!1)}(e,n);else{var t=e.children,r=e.flags;if(4&r)K(t.$LI,n);else if(8&r)K(t,n);else if(2===e.childFlags)K(t,n);else if(12&e.childFlags)for(var a=0,l=t.length;a<l;a++)K(t[a],n)}}W.wrapped=!0;var Q=V("onChange",z);function z(e,n,t,o){var r=Boolean(e.multiple);if(i(e.multiple)||r===n.multiple||(n.multiple=r),1!==o.childFlags){var a=e.value;t&&i(a)&&(a=e.defaultValue),K(o,a)}}var G=V("onInput",Z),J=V("onChange");function Z(e,n,t){var o=e.value,r=n.value;if(i(o)){if(t){var a=e.defaultValue;i(a)||a===r||(n.defaultValue=a,n.value=a)}}else r!==o&&(n.defaultValue=o,n.value=o)}function ee(e,n,t,o,r,i){64&e?H(o,t):256&e?z(o,t,r,n):128&e&&Z(o,t,r),i&&(t.$V=n)}function ne(e,n,t){64&e?function(e,n){X(n.type)?(e.onchange=Y,e.onclick=W):e.oninput=_}(n,t):256&e?function(e){e.onchange=Q}(n):128&e&&function(e,n){e.oninput=G,n.onChange&&(e.onchange=J)}(n,t)}function te(e){return e.type&&X(e.type)?!i(e.checked):!i(e.value)}function oe(e){e&&(l(e)?e(null):e.current&&(e.current=null))}function re(e,n){e&&(l(e)?function(e,n){p.push(function(){return n(e)})}(n,e):void 0!==e.current&&(e.current=n))}function ie(e,n){ae(e),n&&b(e,n)}function ae(e){var n,t=e.flags,o=e.children;if(481&t){n=e.ref;var r=e.props;oe(n);var a=e.childFlags;if(!c(r))for(var s in r)switch(s){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":B(s,null,e.dom)}12&a?le(o):2===a&&ae(o)}else o&&(4&t?(l(o.componentWillUnmount)&&o.componentWillUnmount(),oe(e.ref),o.$UN=!0,ae(o.$LI)):8&t?(!i(n=e.ref)&&l(n.onComponentWillUnmount)&&n.onComponentWillUnmount(y(e),e.props||f),ae(o)):1024&t?ie(o,e.ref):8192&t&&12&e.childFlags&&le(o))}function le(e){for(var n=0,t=e.length;n<t;n++)ae(e[n])}function se(e){e.textContent=""}function ce(e,n,t){le(t),8192&n.flags?b(n,e):se(e)}function ue(e,n,t,o,r,a,u){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":B(e,t,o);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":o.autofocus=!!t;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":o[e]=!!t;break;case"defaultChecked":case"value":case"volume":if(a&&"value"===e)return;var d=i(t)?"":t;o[e]!==d&&(o[e]=d);break;case"style":!function(e,n,t){if(i(n))t.removeAttribute("style");else{var o,r,a=t.style;if(s(n))a.cssText=n;else if(i(e)||s(e))for(o in n)r=n[o],a.setProperty(o,r);else{for(o in n)(r=n[o])!==e[o]&&a.setProperty(o,r);for(o in e)i(n[o])&&a.removeProperty(o)}}}(n,t,o);break;case"dangerouslySetInnerHTML":var f=n&&n.__html||"",p=t&&t.__html||"";f!==p&&(i(p)||function(e,n){var t=document.createElement("i");return t.innerHTML=n,t.innerHTML===e.innerHTML}(o,p)||(c(u)||(12&u.childFlags?le(u.children):2===u.childFlags&&ae(u.children),u.children=null,u.childFlags=1),o.innerHTML=p));break;default:111===e.charCodeAt(0)&&110===e.charCodeAt(1)?function(e,n,t){var o=e.toLowerCase();if(l(n)||i(n)){var r=t[o];r&&r.wrapped||(t[o]=n)}else{var a=n.event;a&&l(a)&&(t[o]=function(e,n){return function(t){e(n.data,t)}}(a,n))}}(e,t,o):i(t)?o.removeAttribute(e):r&&F[e]?o.setAttributeNS(F[e],e,t):o.setAttribute(e,t)}}function de(e,n,t){var o=fe(e.render(n,e.state,t)),r=t;return l(e.getChildContext)&&(r=d(t,e.getChildContext())),e.$CX=r,o}function fe(e){return a(e)?e=M():r(e)?e=U(e,null):o(e)?e=A(e,0,null):16384&e.flags&&(e=L(e)),e}function pe(e,n,t,o,r){var a=e.flags|=16384;481&a?function(e,n,t,o,r){var a=e.flags,l=e.props,s=e.className,u=e.ref,d=e.children,f=e.childFlags;o=o||(32&a)>0;var p=function(e,n){return n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e.type,o);e.dom=p,i(s)||""===s||(o?p.setAttribute("class",s):p.className=s);if(16===f)ge(p,d);else if(1!==f){var h=o&&"foreignObject"!==e.type;2===f?(16384&d.flags&&(e.children=d=L(d)),pe(d,p,t,h,null)):8!==f&&4!==f||ve(d,p,t,h,null)}c(n)||g(n,p,r);c(l)||function(e,n,t,o,r){var i=!1,a=(448&n)>0;for(var l in a&&(i=te(t))&&ne(n,o,t),t)ue(l,null,t[l],o,r,i,null);a&&ee(n,e,o,t,!0,i)}(e,a,l,p,o);re(u,p)}(e,n,t,o,r):4&a?function(e,n,t,o,r){var i=function(e,n,t,o){var r=new n(t,o),i=r.$N=Boolean(n.getDerivedStateFromProps||r.getSnapshotBeforeUpdate);if(e.children=r,r.$BS=!1,r.context=o,r.props===f&&(r.props=t),i)r.state=x(r,t,r.state);else if(l(r.componentWillMount)){if(r.$BR=!0,r.componentWillMount(),r.$PSS){var a=r.state,s=r.$PS;if(c(a))r.state=s;else for(var u in s)a[u]=s[u];r.$PSS=!1,r.$PS=null}r.$BR=!1}return r.$LI=de(r,t,o),r}(e,e.type,e.props||f,t);pe(i.$LI,n,i.$CX,o,r),function(e,n){re(e,n),l(n.componentDidMount)&&p.push(function(e){return function(){e.$UPD=!0,e.componentDidMount(),e.$UPD=!1}}(n))}(e.ref,i),i.$UPD=!1}(e,n,t,o,r):8&a?function(e,n,t,o,r){var a=e.type,s=e.props||f,c=e.ref,u=fe(32768&e.flags?a(s,c,t):a(s,t));e.children=u,pe(u,n,t,o,r),function(e,n,t){i(n)||(l(n.onComponentWillMount)&&n.onComponentWillMount(e),l(n.onComponentDidMount)&&p.push(function(e,n,t){return function(){return e.onComponentDidMount(y(n),t)}}(n,t,e)))}(s,c,e)}(e,n,t,o,r):512&a||16&a?he(e,n,r):8192&a?function(e,n,t,o,r){var i=e.children;2===e.childFlags?pe(i,n,r,o,r):ve(i,n,t,o,r)}(e,n,t,o,r):1024&a&&function(e,n,t,o){pe(e.children,e.ref,n,!1,null);var r=M();he(r,t,o),e.dom=r.dom}(e,t,n,r)}function he(e,n,t){var o=e.dom=document.createTextNode(e.children);c(n)||g(n,o,t)}function ge(e,n){e.textContent=n}function ve(e,n,t,o,r){for(var i=0,a=e.length;i<a;i++){var l=e[i];16384&l.flags&&(e[i]=l=L(l)),pe(l,n,t,o,r)}}function me(e,n,t,o,r,s){var u=n.flags|=16384;e.flags!==u||e.type!==n.type||e.key!==n.key||0!=(2048&u)?16384&e.flags?function(e,n,t,o,r){ae(e),0!=(n.flags&e.flags&2033)?(pe(n,null,o,r,null),function(e,n,t){e.replaceChild(n,t)}(t,n.dom,e.dom)):(pe(n,t,o,r,y(e)),b(e,t))}(e,n,t,o,r):pe(n,t,o,r,s):481&u?function(e,n,t,o,r){var a,l=e.dom,s=e.props,c=n.props,u=!1,d=!1;if(n.dom=l,o=o||(32&r)>0,s!==c){var p=s||f;if((a=c||f)!==f)for(var h in(u=(448&r)>0)&&(d=te(a)),a){var g=p[h],v=a[h];g!==v&&ue(h,g,v,l,o,d,e)}if(p!==f)for(var m in p)a.hasOwnProperty(m)||i(p[m])||ue(m,p[m],null,l,o,d,e)}var y=n.children,b=n.className,w=n.ref,x=e.ref;e.className!==b&&(i(b)?l.removeAttribute("class"):o?l.setAttribute("class",b):l.className=b);4096&r?function(e,n){e.textContent!==n&&(e.textContent=n)}(l,y):ye(e.childFlags,n.childFlags,e.children,y,l,t,o&&"foreignObject"!==n.type,null,e);u&&ee(r,n,l,a,!1,d);x!==w&&(oe(x),re(w,l))}(e,n,o,r,u):4&u?function(e,n,t,o,r,i){var a=n.children=e.children;if(c(a))return;var s=n.props||f,u=n.ref,p=e.ref,h=a.state;if(a.$UPD=!0,!a.$N){if(l(a.componentWillReceiveProps)){if(a.$BR=!0,a.componentWillReceiveProps(s,o),a.$UN)return;a.$BR=!1}a.$PSS&&(h=d(h,a.$PS),a.$PSS=!1,a.$PS=null)}be(a,h,s,t,o,r,!1,i),p!==u&&(oe(p),re(u,a));a.$UPD=!1}(e,n,t,o,r,s):8&u?function(e,n,t,o,r,a){var s=!0,c=n.props||f,u=n.ref,d=e.props,p=!i(u),h=e.children;p&&l(u.onComponentShouldUpdate)&&(s=u.onComponentShouldUpdate(d,c));if(!1!==s){p&&l(u.onComponentWillUpdate)&&u.onComponentWillUpdate(d,c);var g=fe(n.type(c,o));me(h,g,t,o,r,a),n.children=g,p&&l(u.onComponentDidUpdate)&&u.onComponentDidUpdate(d,c)}else n.children=h}(e,n,t,o,r,s):16&u?function(e,n){var t=n.children,o=e.dom;t!==e.children&&(o.nodeValue=t);n.dom=o}(e,n):512&u?n.dom=e.dom:8192&u?function(e,n,t,o,r){var i=e.children,a=null;0==(2&n.childFlags)&&n.children.length>i.length&&(a=y(i[i.length-1]).nextSibling);ye(e.childFlags,n.childFlags,i,n.children,t,o,r,a,e)}(e,n,t,o,r):function(e,n,t){var o=e.ref,r=n.ref,i=n.children;if(ye(e.childFlags,n.childFlags,e.children,i,o,t,!1,null,e),n.dom=e.dom,o!==r&&!a(i)){var l=i.dom;v(o,l),h(r,l)}}(e,n,o)}function ye(e,n,t,o,r,i,a,l,s){switch(e){case 2:switch(n){case 2:me(t,o,r,i,a,l);break;case 1:ie(t,r);break;case 16:ae(t),ge(r,o);break;default:!function(e,n,t,o,r){ae(e),ve(n,t,o,r,y(e)),b(e,t)}(t,o,r,i,a)}break;case 1:switch(n){case 2:pe(o,r,i,a,l);break;case 1:break;case 16:ge(r,o);break;default:ve(o,r,i,a,l)}break;case 16:switch(n){case 16:!function(e,n,t){e!==n&&(""!==e?t.firstChild.nodeValue=n:t.textContent=n)}(t,o,r);break;case 2:se(r),pe(o,r,i,a,l);break;case 1:se(r);break;default:se(r),ve(o,r,i,a,l)}break;default:switch(n){case 16:le(t),ge(r,o);break;case 2:ce(r,s,t),pe(o,r,i,a,l);break;case 1:ce(r,s,t);break;default:var c=t.length,u=o.length;0===c?u>0&&ve(o,r,i,a,l):0===u?ce(r,s,t):8===n&&8===e?function(e,n,t,o,r,i,a,l,s){var c,u,d=i-1,f=a-1,p=0,h=0,g=e[h],v=n[h];e:{for(;g.key===v.key;){if(16384&v.flags&&(n[h]=v=L(v)),me(g,v,t,o,r,l),e[h]=v,++h>d||h>f)break e;g=e[h],v=n[h]}for(g=e[d],v=n[f];g.key===v.key;){if(16384&v.flags&&(n[f]=v=L(v)),me(g,v,t,o,r,l),e[d]=v,f--,h>--d||h>f)break e;g=e[d],v=n[f]}}if(h>d){if(h<=f)for(u=(c=f+1)<a?y(n[c]):l;h<=f;)16384&(v=n[h]).flags&&(n[h]=v=L(v)),h++,pe(v,t,o,r,u)}else if(h>f)for(;h<=d;)ie(e[h++],t);else{for(var m=h,b=h,x=d-h+1,N=f-h+1,k=[];p++<=N;)k.push(0);var S=x===i,C=!1,$=0,U=0;if(a<4||(x|N)<32)for(p=m;p<=d;p++)if(g=e[p],U<N){for(h=b;h<=f;h++)if(v=n[h],g.key===v.key){if(k[h-b]=p+1,S)for(S=!1;m<p;)ie(e[m++],t);$>h?C=!0:$=h,16384&v.flags&&(n[h]=v=L(v)),me(g,v,t,o,r,l),U++;break}!S&&h>f&&ie(g,t)}else S||ie(g,t);else{var A={};for(p=b;p<=f;p++)A[n[p].key]=p;for(p=m;p<=d;p++)if(g=e[p],U<N)if(void 0!==(h=A[g.key])){if(S)for(S=!1;p>m;)ie(e[m++],t);v=n[h],k[h-b]=p+1,$>h?C=!0:$=h,16384&v.flags&&(n[h]=v=L(v)),me(g,v,t,o,r,l),U++}else S||ie(g,t);else S||ie(g,t)}if(S)ce(t,s,e),ve(n,t,o,r,l);else if(C){var M=function(e){var n,t,o,r,i,a=e.slice(),l=[0],s=e.length;for(n=0;n<s;n++){var c=e[n];if(0!==c){if(t=l[l.length-1],e[t]<c){a[n]=t,l.push(n);continue}for(o=0,r=l.length-1;o<r;)e[l[i=(o+r)/2|0]]<c?o=i+1:r=i;c<e[l[o]]&&(o>0&&(a[n]=l[o-1]),l[o]=n)}}o=l.length,r=l[o-1];for(;o-- >0;)l[o]=r,r=a[r];return l}(k);for(h=M.length-1,p=N-1;p>=0;p--)0===k[p]?(16384&(v=n[$=p+b]).flags&&(n[$]=v=L(v)),pe(v,t,o,r,(c=$+1)<a?y(n[c]):l)):h<0||p!==M[h]?w(v=n[$=p+b],t,(c=$+1)<a?y(n[c]):l):h--}else if(U!==N)for(p=N-1;p>=0;p--)0===k[p]&&(16384&(v=n[$=p+b]).flags&&(n[$]=v=L(v)),pe(v,t,o,r,(c=$+1)<a?y(n[c]):l))}}(t,o,r,i,a,c,u,l,s):function(e,n,t,o,r,i,a,l){for(var s,c,u=i>a?a:i,d=0;d<u;d++)s=n[d],c=e[d],16384&s.flags&&(s=n[d]=L(s)),me(c,s,t,o,r,l),e[d]=s;if(i<a)for(d=u;d<a;d++)16384&(s=n[d]).flags&&(s=n[d]=L(s)),pe(s,t,o,r,l);else if(i>a)for(d=u;d<i;d++)ie(e[d],t)}(t,o,r,i,a,c,u,l)}}}function be(e,n,t,o,r,i,a,s){var c=e.state,u=e.props,f=Boolean(e.$N),h=l(e.shouldComponentUpdate);if(f&&(n=x(e,t,n!==c?d(c,n):n)),a||!h||h&&e.shouldComponentUpdate(t,n,r)){!f&&l(e.componentWillUpdate)&&e.componentWillUpdate(t,n,r),e.props=t,e.state=n,e.context=r;var g=null,v=de(e,t,r);f&&l(e.getSnapshotBeforeUpdate)&&(g=e.getSnapshotBeforeUpdate(u,c)),me(e.$LI,v,o,e.$CX,i,s),e.$LI=v,l(e.componentDidUpdate)&&function(e,n,t,o){p.push(function(){return e.componentDidUpdate(n,t,o)})}(e,u,c,g)}else e.props=t,e.state=n,e.context=r}"undefined"!=typeof document&&document.body;function we(e,n,t,o){!function(e,n,t,o){var r=n.$V;i(r)?i(e)||(16384&e.flags&&(e=L(e)),pe(e,n,o||f,!1,null),n.$V=e,r=e):i(e)?(ie(r,n),n.$V=null):(16384&e.flags&&(e=L(e)),me(r,e,n,o||f,!1,null),r=n.$V=e),p.length>0&&m(p),l(t)&&t(),l(N.renderComplete)&&N.renderComplete(r,n)}(e,n,t,o)}var xe=[],Ne="undefined"!=typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout.bind(window);function ke(e,n,t,o){l(n)&&(n=n(e.state,e.props,e.context));var r=e.$PS;if(i(r))e.$PS=n;else for(var a in n)r[a]=n[a];if(e.$PSS||e.$BR)e.$PSS=!0,e.$BR&&l(t)&&p.push(t.bind(e));else if(e.$UPD){if(1===xe.push(e)&&Ne(Ce),l(t)){var s=e.$QU;s||(s=e.$QU=[]),s.push(t)}}else e.$PSS=!0,e.$UPD=!0,0===xe.length?$e(e,o,t):xe.push(e)}function Se(e){for(var n=e.$QU,t=0,o=n.length;t<o;t++)n[t].call(e);e.$QU=null}function Ce(){for(var e;e=xe.pop();){$e(e,!1,e.$QU?Se.bind(null,e):null)}}function $e(e,n,t){if(!e.$UN){if(n||!e.$BR){e.$PSS=!1;var o=e.$PS;e.$PS=null,e.$UPD=!0,be(e,d(e.state,o),e.props,y(e.$LI).parentNode,e.context,!1,n,null),e.$UPD=!1,p.length>0&&m(p)}else e.state=e.$PS,e.$PS=null;l(t)&&t.call(e)}}var Ue=function(e,n){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.$N=!1,this.props=e||f,this.context=n||f};Ue.prototype.forceUpdate=function(e){this.$UN||ke(this,{},e,!0)},Ue.prototype.setState=function(e,n){this.$UN||this.$BS||ke(this,e,n,!1)},Ue.prototype.render=function(e,n,t){return null};var Ae=t(0),Le=t.n(Ae);t(1);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ie(e,n,t){return n&&Pe(e.prototype,n),t&&Pe(e,t),e}function Oe(e,n){return!n||"object"!==Me(n)&&"function"!=typeof n?je(e):n}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Re(e,n)}function Re(e,n){return(Re=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Te=function e(n,t){Be(this,e),this.car=n,this.cdr=t,this.id=Le()()},Ee=function e(n,t){if(null==n)return null;if(!(n instanceof Te))return n;var o=new Te(e(n.car,t),e(n.cdr,t));return t.push(o),o},qe=function(e,n){if(e instanceof Te){var t=n.findIndex(function(n){return n.id===e.id});n.splice(t,1),qe(e.car,n),qe(e.cdr,n)}};function Ve(){return C(1,"div","null-ptr",C(32,"svg",null,[C(32,"line",null,null,1,{x1:"0",y1:"0",x2:"20",y2:"20"}),C(32,"line",null,null,1,{x1:"0",y1:"20",x2:"20",y2:"0"})],4,{width:"20",height:"20"}),2)}function Xe(){return C(1,"div","downwards-arrow",C(32,"svg",null,C(32,"path",null,null,1,{d:"m10 0l5 7l5-7l-5 3z",fill:"black"}),2,{width:"30",height:"7"}),2)}function _e(){return C(1,"div","rightwards-arrow",C(32,"svg",null,C(32,"path",null,null,1,{d:"m0 5l7 5l-7 5l3-5z",fill:"black"}),2,{width:"7",height:"20"}),2)}var Ye=function(e){function n(e){var t;return Be(this,n),(t=Oe(this,De(n).call(this,e))).state={editable:!1},t.checkCancelOrConfirm=t.checkCancelOrConfirm.bind(je(je(t))),t.cancel=t.cancel.bind(je(je(t))),t.edit=t.edit.bind(je(je(t))),t}return Fe(n,Ue),Ie(n,[{key:"componentDidMount",value:function(){null==this.props.thing&&this.setState({editable:!0})}},{key:"checkCancelOrConfirm",value:function(e){"Enter"==e.code?(this.props.change(e.target.value),this.cancel()):"Escape"==e.code&&this.cancel()}},{key:"cancel",value:function(){this.setState({editable:!1})}},{key:"edit",value:function(e){e.stopPropagation(),this.setState({editable:!0})}},{key:"renderInner",value:function(){var e=this;return this.state.editable?C(64,"input",null,null,1,{type:"text",onKeyDown:function(n){return e.checkCancelOrConfirm(n)},onFocusOut:this.cancel,defaultValue:this.props.thing},null,function(e){return e&&(e.focus()||e.select())}):C(1,"span",null,this.props.thing,0)}},{key:"render",value:function(){return C(1,"div","changeable-text",this.renderInner(),0,{onDblClick:this.edit})}}]),n}(),We=function(e){function n(e){var t;return Be(this,n),(t=Oe(this,De(n).call(this,e))).changeCar=t.changeCar.bind(je(je(t))),t.addNewNode=t.addNewNode.bind(je(je(t))),t.condRenderCar=t.condRenderCar.bind(je(je(t))),t.condRenderCdr=t.condRenderCdr.bind(je(je(t))),t.mouseOverCar=t.mouseOver.bind(je(je(t)),!0),t.mouseOverCdr=t.mouseOver.bind(je(je(t)),!1),t.mouseOut=t.mouseOut.bind(je(je(t))),t}return Fe(n,Ue),Ie(n,[{key:"changeCar",value:function(e){var n=this.props.node;n.car=void 0!==e?e:n.car,this.props.updateNode(n)}},{key:"addNewNode",value:function(e){e.stopPropagation(),null==this.props.node.cdr&&this.props.addNewNode(this.props.node.id)}},{key:"condRenderCar",value:function(e){return e instanceof Te?void 0:$(2,Ye,{thing:e,change:this.changeCar})}},{key:"condRenderCdr",value:function(e){return $(2,e instanceof Te?_e:Ve)}},{key:"mouseOver",value:function(e,n){if(e)Array.from(document.querySelectorAll('[data-car-id="'.concat(this.props.node.id,'"]'))).map(function(e){e.classList.add("output-highlighted")});else{var t=this.props.node.cdr;null!=t?(Array.from(document.querySelectorAll('[data-node-id="'.concat(t.id,'"]'))).map(function(e){e.classList.add("view-outlined")}),Array.from(document.querySelectorAll('[data-cdr-id="'.concat(t.id,'"]'))).map(function(e){e.classList.add("output-outlined")})):Array.from(document.querySelectorAll('[data-cdr-id="'.concat(this.props.node.id,'-empty"]'))).map(function(e){e.classList.add("output-highlighted")})}}},{key:"mouseOut",value:function(e){Array.from(document.querySelectorAll(".output-highlighted")).map(function(e){e.classList.remove("output-highlighted")}),Array.from(document.querySelectorAll(".output-outlined")).map(function(e){e.classList.remove("output-outlined")}),Array.from(document.querySelectorAll(".view-outlined")).map(function(e){e.classList.remove("view-outlined")})}},{key:"render",value:function(){var e=this.props.node;return C(1,"div","boxy-wrapper",[C(1,"div","boxy",[C(1,"div","boxy-car",this.condRenderCar(e.car),0,{onMouseOver:this.mouseOverCar,onMouseOut:this.mouseOut}),C(1,"div","boxy-cdr",this.condRenderCdr(e.cdr),0,{onMouseOver:this.mouseOverCdr,onMouseOut:this.mouseOut,onDblClick:this.addNewNode}),e.car instanceof Te&&$(2,Xe),e.cdr instanceof Te&&$(2,n,{node:e.cdr,updateNode:this.props.updateNode,addNewNode:this.props.addNewNode})],0),e.car instanceof Te&&$(2,n,{node:e.car,updateNode:this.props.updateNode,addNewNode:this.props.addNewNode})],0,{"data-node-id":e.id})}}]),n}(),He=function(e){function n(e){var t;return Be(this,n),(t=Oe(this,De(n).call(this,e))).state={nodes:e.nodes||[],allNodes:e.allNodes||[],draggingId:null,draggingEl:null,draggingNode:null,dragging:!1,renderMode:"cons"},t.addNewNode=t.addNewNode.bind(je(je(t))),t.getNodeFromId=t.getNodeFromId.bind(je(je(t))),t.getNodeIndex=t.getNodeIndex.bind(je(je(t))),t.updateNode=t.updateNode.bind(je(je(t))),t.deleteNode=t.deleteNode.bind(je(je(t))),t.changeTextRenderMode=t.changeTextRenderMode.bind(je(je(t))),t.renderText=t.renderText.bind(je(je(t))),t.startDragging=t.startDragging.bind(je(je(t))),t.isDragging=t.isDragging.bind(je(je(t))),t.stopDragging=t.stopDragging.bind(je(je(t))),t.mouseMove=t.mouseMove.bind(je(je(t))),t.mouseOut=t.mouseOut.bind(je(je(t))),t}return Fe(n,Ue),Ie(n,[{key:"addNewNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this.state,t=n.nodes,o=n.allNodes,r=new Te(null,null);if(o.push(r),void 0===e)t.push(o.length-1);else{var i=this.getNodeFromId(e);i.cdr=r,this.updateNode(i)}this.setState({nodes:t,allNodes:o})}},{key:"getNodeFromId",value:function(e){return this.state.allNodes.find(function(n){return n.id===e})}},{key:"getNodeIndex",value:function(e){return this.state.allNodes.findIndex(function(n){return n.id===e.id})}},{key:"updateNode",value:function(e){var n=this.state.allNodes;n[this.getNodeIndex(e)]=e,this.setState({allNodes:n})}},{key:"deleteNode",value:function(e){var n=this,t=this.state,o=t.nodes,r=t.allNodes,i=this.state.allNodes.filter(function(n){return null!=n.cdr&&n.cdr.id===e.id}),a=this.state.allNodes.filter(function(n){return n.car instanceof Te&&n.car.id===e.id});if(confirm("Are you sure you want to delete this node?")){var l=o.map(function(e){return r[e]});qe(e,r),o=l.filter(function(n){return n.id!==e.id}).map(function(e){return n.getNodeIndex(e)}),i.length&&(i[0].cdr=null),a.length&&(a[0].car=null),this.setState({nodes:o,allNodes:r})}}},{key:"changeTextRenderMode",value:function(e){this.setState({renderMode:e.target.value})}},{key:"renderText",value:function(){var e=this;switch(this.state.renderMode){case"cons":return this.state.nodes.map(function(n){return function e(n,t){return null==n?"empty":'(cons <span data-car-id="'.concat(n.id,'">').concat(n.car instanceof Te?e(n.car,t+1):null==n.car?'""':/^\d+$|^'[\S]+$/.test(n.car)?n.car:'"'.concat(n.car,'"'),"</span>").concat(null==n.cdr?" ":"\n"+" ".repeat(6*t),'<span data-cdr-id="').concat(null!=n.cdr?n.cdr.id:n.id+"-empty",'">').concat(e(n.cdr,t+1),"</span>)")}(e.state.allNodes[n],1)}).join("\n\n");case"list":return this.state.nodes.map(function(n){return'(list <span data-car-id="'.concat(e.state.allNodes[n].id,'">').concat(function e(n,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==n?"":(o.push((n.car instanceof Te?"".concat(r?"":"\n"+" ".repeat(6*t),'<span data-car-id="').concat(n.id,'">(list ').concat(e(n.car,t+1,[],!0).join(" ").replace(/\s+<\//g,"</"),")</span>\n").concat(" ".repeat(6*t-1)):'<span data-car-id="'.concat(n.id,'">').concat(null==n.car?'""':/^\d+$|^'[\S]+$/.test(n.car)?n.car:'"'.concat(n.car,'"'),"</span>"))+'<span data-cdr-id="'.concat(null!=n.cdr?n.cdr.id:n.id+"-empty",'">')),e(n.cdr,t,o),o.push("</span>"),o)}(e.state.allNodes[n],1,[],!0).join(" ").replace(/\s+<\//g,"</"),"</span>)")}).join("\n\n");case"quot":return this.state.nodes.map(function(n){return"'(<span data-car-id=\"".concat(e.state.allNodes[n].id,'">').concat(function e(n,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==n?"":(o.push((n.car instanceof Te?"".concat(r?"":"\n"+" ".repeat(2*t),'<span data-car-id="').concat(n.id,'">(').concat(e(n.car,t+1,[],!0).join(" ").replace(/\s+<\//g,"</"),")</span>\n").concat(" ".repeat(2*t-1)):'<span data-car-id="'.concat(n.id,'">').concat(null==n.car?'""':/^\d+$/.test(n.car)?n.car:/^'[\S]+$/.test(n.car)?n.car.slice(1):'"'.concat(n.car,'"'),"</span>"))+'<span data-cdr-id="'.concat(null!=n.cdr?n.cdr.id:n.id+"-empty",'">')),e(n.cdr,t,o),o.push("</span>"),o)}(e.state.allNodes[n],1,[],!0).join(" ").replace(/\s+<\//g,"</"),"</span>)")}).join("\n\n")}}},{key:"startDragging",value:function(e){1===e.buttons&&e.target.closest(".boxy-wrapper")&&this.setState({mouseX:e.clientX,mouseY:e.clientY,draggingId:e.target.closest(".boxy-wrapper").dataset.nodeId})}},{key:"isDragging",value:function(e){var n=this;if(this.state.dragging&&this.state.draggingEl&&1===e.buttons){var t=this.state.draggingBoundingBoxes.filter(function(n){return n[2]<=e.clientX&&e.clientX<=n[4]&&n[1]<=e.clientY&&e.clientY<=n[3]&&!n[0].closest(".dragging")}),o=t.length?t[0][0]:null;this.state.draggingEl.style.left="".concat(e.clientX-this.state.offsetX,"px"),this.state.draggingEl.style.top="".concat(e.clientY-this.state.offsetY,"px"),(document.querySelector(".drag-active")||document.body).classList.remove("drag-active"),o&&o.classList.add("drag-active")}else if(this.state.draggingId&&1===e.buttons&&(Math.abs(this.state.mouseX-e.clientX)>5||Math.abs(this.state.mouseY-e.clientY)>5)){var r=document.querySelector('[data-node-id="'.concat(this.state.draggingId,'"]')),i=this.state.mouseY-r.getBoundingClientRect().top;r.classList.add("dragging"),r.style.left="".concat(e.clientX- -10,"px"),r.style.top="".concat(e.clientY-i,"px"),this.setState(function(e){return{mouseX:null,mouseY:null,offsetX:-10,offsetY:i,draggingEl:r,draggingNode:n.getNodeFromId(e.draggingId),draggingBoundingBoxes:Array.from(document.querySelectorAll(".boxy-car, .boxy-cdr")).map(function(e){var n=e.getBoundingClientRect();return[e,n.top,n.left,n.top+n.height,n.left+n.width]}),dragging:!0}})}}},{key:"stopDragging",value:function(e){var n=this,t=this.state.draggingEl;if(t){var o=[".add-to-nodes",".dup-node",".delete-node"].map(function(e){var n=document.querySelector(e).getBoundingClientRect();return[n.top,n.left,n.top+n.height,n.left+n.width,e]}),r=this.state.draggingBoundingBoxes.filter(function(n){return n[2]<=e.clientX&&e.clientX<=n[4]&&n[1]<=e.clientY&&e.clientY<=n[3]&&!n[0].closest(".dragging")}),i=r.length?r[0][0]:null;if(i){var a=i.classList.contains("boxy-cdr"),l=i.closest(".boxy-wrapper").dataset.nodeId,s=this.state.allNodes.filter(function(e){return e.cdr&&e.cdr.id===n.state.draggingId}),c=this.state.allNodes.filter(function(e){return e.car instanceof Te&&e.car.id===n.state.draggingId}),u=this.getNodeFromId(l),d=this.state,f=d.nodes,p=d.allNodes;if(s.length&&(s[0].cdr=null),c.length&&(c[0].car=null),a)u.cdr instanceof Te&&f.push(this.getNodeIndex(u.cdr)),u.cdr=this.state.draggingNode;else{if(u.car instanceof Te)f.push(this.getNodeIndex(u.car));else if(null!=u.car){var h=new Te(u.car,null);p.push(h),f.push(p.length-1)}u.car=this.state.draggingNode}var g=this.getNodeIndex(this.state.draggingNode);f=f.filter(function(e){return e!==g}),this.setState({nodes:f,allNodes:p})}else{var v=!0,m=!1,y=void 0;try{for(var b,w=o[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var x=b.value;if(x[1]<=e.clientX&&e.clientX<=x[3]&&x[0]<=e.clientY&&e.clientY<=x[2]){switch(x[4]){case".add-to-nodes":if(!this.state.nodes.includes(this.getNodeIndex(this.state.draggingNode))){var N=this.state.allNodes.filter(function(e){return e.cdr&&e.cdr.id===n.state.draggingId}),k=this.state.allNodes.filter(function(e){return e.car instanceof Te&&e.car.id===n.state.draggingId}),S=this.state.nodes;N.length&&(N[0].cdr=null),k.length&&(k[0].car=null),S.push(this.getNodeIndex(this.state.draggingNode)),this.setState({nodes:S});break}case".dup-node":var C=this.state,$=C.nodes,U=C.allNodes;Ee(this.state.draggingNode,U),$.push(U.length-1),this.setState({nodes:$,allNodes:U});break;case".delete-node":this.deleteNode(this.state.draggingNode)}break}}}catch(e){m=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(m)throw y}}}(document.querySelector(".drag-active")||document.body).classList.remove("drag-active"),t.classList.remove("dragging"),t.style.top=null,t.style.left=null}this.state.dragging&&this.setState({draggingId:null,draggingEl:null,draggingNode:null,dragging:!1})}},{key:"mouseMove",value:function(e){if(e.stopPropagation(),Array.from(document.querySelectorAll(".view-highlighted")).map(function(e){e.classList.remove("view-highlighted")}),Array.from(document.querySelectorAll(".view-outlined")).map(function(e){e.classList.remove("view-outlined")}),Array.from(document.querySelectorAll(".output-highlighted")).map(function(e){e.classList.remove("output-highlighted")}),Array.from(document.querySelectorAll(".output-outlined")).map(function(e){e.classList.remove("output-outlined")}),"SPAN"===e.target.tagName){var n=e.target;if(n.dataset.carId)Array.from(document.querySelectorAll('[data-node-id="'.concat(n.dataset.carId,'"] > .boxy > .boxy-car'))).map(function(e){e.classList.add("view-highlighted")}),n.classList.add("output-highlighted");else if(n.dataset.cdrId){var t='[data-node-id="'.concat(n.dataset.cdrId,'"]');/-empty/.test(n.dataset.cdrId)?(t=t.replace("-empty","")+" > .boxy > .boxy-cdr",Array.from(document.querySelectorAll(t)).map(function(e){e.classList.add("view-highlighted")}),n.classList.add("output-highlighted")):(Array.from(document.querySelectorAll(t)).map(function(e){e.classList.add("view-outlined")}),n.classList.add("output-outlined"))}}}},{key:"mouseOut",value:function(){Array.from(document.querySelectorAll(".view-highlighted")).map(function(e){e.classList.remove("view-highlighted")}),Array.from(document.querySelectorAll(".view-outlined")).map(function(e){e.classList.remove("view-outlined")}),Array.from(document.querySelectorAll(".output-highlighted")).map(function(e){e.classList.remove("output-highlighted")}),Array.from(document.querySelectorAll(".output-outlined")).map(function(e){e.classList.remove("output-outlined")})}},{key:"render",value:function(){var e=this;return A([C(1,"div","app-main",[this.state.nodes.map(function(n){return $(2,We,{node:e.state.allNodes[n],updateNode:e.updateNode,addNewNode:e.addNewNode})}),this.state.dragging&&A([C(1,"em","add-to-nodes","Make separate list",16),C(1,"br"),C(1,"em","dup-node","Duplicate node",16),C(1,"br"),C(1,"em","delete-node","Delete node",16)],4)],0,{onDblClick:function(n){e.addNewNode()},onMouseDown:this.startDragging,onMouseMove:this.isDragging,onMouseUp:this.stopDragging}),C(1,"div","app-output",[C(256,"select",null,["cons","list","quot"].map(function(n){return C(1,"option",null,[U("("),n,U(" ...)")],0,{value:n,checked:e.state.renderMode===n})}),0,{onChange:this.changeTextRenderMode}),C(1,"pre",null,null,1,{onMouseMove:this.mouseMove,onMouseOut:this.mouseOut,dangerouslySetInnerHTML:{__html:this.renderText()}})],4)],4)}}]),n}(),Ke=new Te("A",null),Qe=new Te("B",Ke),ze=new Te("C",Qe),Ge=new Te("D",null),Je=new Te(ze,Ge),Ze=new Te("E",Je),en=new Te("F",null),nn=new Te("G",en);we($(2,He,{nodes:[8],allNodes:[Ke,Qe,ze,Ge,Je,Ze,en,nn,new Te(nn,Ze)]}),document.querySelector("body"))}]);