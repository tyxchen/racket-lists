!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=6)}([function(e,n,t){var o=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var n="",t=o.getRandomValues(new Uint8Array(e));0<e--;)n+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz~"[63&t[e]];return n}},function(e,n,t){var o=t(2);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(4)(o,r);o.locals&&(e.exports=o.locals)},function(e,n,t){(e.exports=t(3)(!1)).push([e.i,'body {\n    display: flex;\n    flex-direction: column;\n    font-family: sans-serif;\n    height: 100vh;\n    overflow: hidden;\n    margin: 0;\n}\n\nmain {\n    position: relative;\n    flex: 1;\n}\n\nfooter {\n    height: 16px;\n    font-size: 0.8em;\n    font-style: italic;\n    text-align: center;\n    opacity: 0.7;\n    padding: 2px 0;\n}\n\na {\n    color: #03f;\n}\n\na:hover {\n    text-decoration: none;\n}\n\n.app-wrapper {\n    width: 100%;\n}\n\n.app-view {\n    box-sizing: border-box;\n    height: calc(100vh - 140px);\n    overflow: auto;\n    padding: 2em;\n}\n\n.app-resize-handle {\n    position: relative;\n    height: 6px;\n    background-color: #333;\n    cursor: row-resize;\n}\n\n.app-resize-handle::after {\n    content: "";\n    position: absolute;\n    top: 2px;\n    left: calc(50% - 4px);\n    height: 2px;\n    width: 8px;\n    background-color: #aaa;\n    border-radius: 2px;\n}\n\n.app-resize-handle:hover {\n    opacity: .7;\n}\n\n.app-output {\n    height: calc(100% - 6px);\n    box-sizing: border-box;\n    background-color: white;\n    padding: 1em 2em;\n    overflow: auto;\n}\n\n.app-output * {\n    opacity: 1;\n    transition: opacity .3s ease;\n}\n\n.app-output select {\n    position: sticky;\n    top: 0;\n    display: block;\n    margin-left: auto;\n    margin-bottom: -2em;\n}\n\n.dragging-app .app-output {\n    overflow: hidden;\n}\n\n.resizing-app .app-output {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.boxy {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n}\n\n.boxy-car, .boxy-cdr {\n    position: relative;\n    min-width: 20px;\n    height: 20px;\n    background-color: white;\n    border: 1px solid;\n}\n\n.boxy-car:hover, .boxy-cdr:hover {\n    background-color: rgb(255, 255, 100);\n}\n\n.dragging-app .boxy-car:hover, .dragging-app .boxy-cdr:hover {\n    background-color: lightgreen;\n    box-shadow: 0 0 15px skyblue;\n}\n\n.boxy + .boxy-wrapper {\n    margin-top: 10px;\n}\n\n.boxy-wrapper + .boxy-wrapper {\n    margin-top: 20px;\n}\n\n.boxy-car {\n    font-family: monospace;\n    line-height: 20px;\n    text-align: center;\n    padding: 0 4px;\n}\n\n.boxy-cdr:not(:last-child) {\n    margin-right: 20px;\n}\n\n.dragging {\n    position: fixed;\n    opacity: .7;\n    box-shadow: 0 0 15px gold;\n    z-index: 100;\n}\n\nline {\n    stroke: black;\n}\n\n.downwards-arrow {\n    position: absolute;\n    top: 10px;\n    height: 100%;\n    width: 30px;\n    pointer-events: none;\n}\n\n.rightwards-arrow {\n    position: absolute;\n    left: 50%;\n    width: 31px;\n    height: 100%;\n    pointer-events: none;\n}\n\n.downwards-arrow svg {\n    position: absolute;\n    bottom: 0;\n}\n\n.rightwards-arrow svg {\n    position: absolute;\n    right: 0;\n}\n\n.downwards-arrow::before {\n    position: absolute;\n    left: calc(50% - 1px);\n    content: "";\n    width: 2px;\n    height: 100%;\n    background: black;\n}\n\n.rightwards-arrow::before {\n    position: absolute;\n    top: calc(50% - 1px);\n    content: "";\n    height: 2px;\n    width: 100%;\n    background: black;\n}\n\n.changeable-text {\n    width: 100%;\n    height: 100%;\n}\n\n.changeable-text span {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.output-highlighted, .view-highlighted {\n    background-color: rgb(255, 255, 100);\n}\n\n.output-outlined, .view-outlined {\n    outline: 2px solid gold;\n}\n\n.view-controls {\n    height: 0;\n    overflow: hidden;\n    transition: .3s height;\n}\n\n.dragging-app .view-controls {\n    height: 115px;\n}\n\n.dragging-app .view-controls ~ * {\n    opacity: .5;\n}\n\n.add-to-nodes,\n.dup-node,\n.delete-node {\n    display: inline-block;\n    margin-bottom: 20px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.add-to-nodes.drag-active,\n.dup-node.drag-active {\n    background: lightgreen;\n}\n\n.delete-node.drag-active {\n    background: salmon;\n}\n',""])},function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",o=e[3];if(!o)return t;if(n&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(o),i=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[t].concat(i).concat([r]).join("\n")}return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){var o={},r=function(e){var n;return function(){return void 0===n&&(n=e.apply(this,arguments)),n}}(function(){return window&&document&&document.all&&!window.atob}),i=function(e){var n={};return function(e,t){if("function"==typeof e)return e();if(void 0===n[e]){var o=function(e,n){return n?n.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}n[e]=o}return n[e]}}(),a=null,s=0,l=[],c=t(5);function u(e,n){for(var t=0;t<e.length;t++){var r=e[t],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(v(r.parts[a],n))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],n));o[r.id]={id:r.id,refs:1,parts:s}}}}function d(e,n){for(var t=[],o={},r=0;r<e.length;r++){var i=e[r],a=n.base?i[0]+n.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):t.push(o[a]={id:a,parts:[s]})}return t}function f(e,n){var t=i(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=l[l.length-1];if("top"===e.insertAt)o?o.nextSibling?t.insertBefore(n,o.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),l.push(n);else if("bottom"===e.insertAt)t.appendChild(n);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=i(e.insertAt.before,t);t.insertBefore(n,r)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var n=l.indexOf(e);n>=0&&l.splice(n,1)}function h(e){var n=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return t.nc}();o&&(e.attrs.nonce=o)}return g(n,e.attrs),f(e,n),n}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function v(e,n){var t,o,r,i;if(n.transform&&e.css){if(!(i="function"==typeof n.transform?n.transform(e.css):n.transform.default(e.css)))return function(){};e.css=i}if(n.singleton){var l=s++;t=a||(a=h(n)),o=y.bind(null,t,l,!1),r=y.bind(null,t,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var n=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(n,e.attrs),f(e,n),n}(n),o=function(e,n,t){var o=t.css,r=t.sourceMap,i=void 0===n.convertToAbsoluteUrls&&r;(n.convertToAbsoluteUrls||i)&&(o=c(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,t,n),r=function(){p(t),t.href&&URL.revokeObjectURL(t.href)}):(t=h(n),o=function(e,n){var t=n.css,o=n.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,t),r=function(){p(t)});return o(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;o(e=n)}else r()}}e.exports=function(e,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(n=n||{}).attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=r()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var t=d(e,n);return u(t,n),function(e){for(var r=[],i=0;i<t.length;i++){var a=t[i];(s=o[a.id]).refs--,r.push(s)}e&&u(d(e,n),n);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var m=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function y(e,n,t,o){var r=t?"":o.css;if(e.styleSheet)e.styleSheet.cssText=m(n,r);else{var i=document.createTextNode(r),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(i,a[n]):e.appendChild(i)}}},function(e,n){e.exports=function(e){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=n.protocol+"//"+n.host,o=t+n.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,n){var r,i=n.trim().replace(/^"(.*)"$/,function(e,n){return n}).replace(/^'(.*)'$/,function(e,n){return n});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?t+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,n,t){"use strict";t.r(n);var o=Array.isArray;function r(e){var n=typeof e;return"string"===n||"number"===n}function i(e){return u(e)||c(e)}function a(e){return c(e)||!1===e||function(e){return!0===e}(e)||u(e)}function s(e){return"function"==typeof e}function l(e){return"string"==typeof e}function c(e){return null===e}function u(e){return void 0===e}function d(e,n){var t={};if(e)for(var o in e)t[o]=e[o];if(n)for(var r in n)t[r]=n[r];return t}var f={},p=[];function h(e,n){e.appendChild(n)}function g(e,n,t){c(t)?h(e,n):e.insertBefore(n,t)}function v(e,n){e.removeChild(n)}function m(e){for(var n;void 0!==(n=e.shift());)n()}function y(e){for(var n,t;e;){if(2033&(n=e.flags))return e.dom;t=e.children,e=8192&n?2===e.childFlags?t:t[0]:4&n?t.$LI:t}return null}function b(e,n){var t=e.flags;if(2033&t)v(n,e.dom);else{var o=e.children;if(4&t)b(o.$LI,n);else if(8&t)b(o,n);else if(8192&t)if(2===e.childFlags)b(o,n);else for(var r=0,i=o.length;r<i;r++)b(o[r],n)}}function w(e,n,t){var o=e.flags;if(2033&o)g(n,e.dom,t);else{var r=e.children;if(4&o)w(r.$LI,n,t);else if(8&o)w(r,n,t);else if(8192&o)if(2===e.childFlags)w(r,n,t);else for(var i=0,a=r.length;i<a;i++)w(r[i],n,t)}}function x(e,n,t){return e.constructor.getDerivedStateFromProps?d(t,e.constructor.getDerivedStateFromProps(n,t)):t}var k={componentComparator:null,createVNode:null,renderComplete:null},N="$";function S(e,n,t,o,r,i,a,s){this.childFlags=e,this.children=n,this.className=t,this.dom=null,this.flags=o,this.key=void 0===r?null:r,this.props=void 0===i?null:i,this.ref=void 0===a?null:a,this.type=s}function C(e,n,t,o,r,i,a,l){var c=void 0===r?1:r,u=new S(c,o,t,e,a,i,l,n),d=k.createVNode;return s(d)&&d(u),0===c&&I(u,u.children),u}function $(e,n,t,o,r){0!=(2&e)&&(n.prototype&&n.prototype.render?e=4:n.render?(e=32776,n=n.render):e=8);var a=n.defaultProps;if(!i(a))for(var l in t||(t={}),a)u(t[l])&&(t[l]=a[l]);if((8&e)>0&&0==(32768&e)){var c=n.defaultHooks;if(!i(c))if(r)for(var d in c)u(r[d])&&(r[d]=c[d]);else r=c}var f=new S(1,null,null,e,o,t,r,n),p=k.createVNode;return s(p)&&p(f),f}function L(e,n){return new S(1,i(e)?"":e,null,16,n,null,null,null)}function M(e,n,t){var o=C(8192,8192,null,e,n,null,t,null);switch(o.childFlags){case 1:o.children=U(),o.childFlags=2;break;case 16:o.children=[L(e)],o.childFlags=4}return o}function P(e){var n=-81921&e.flags,t=e.props;if(14&n&&!c(t)){var o=t;for(var r in t={},o)t[r]=o[r]}return 0==(8192&n)?new S(e.childFlags,e.children,e.className,n,e.key,t,e.ref,e.type):function(e){var n,t=e.children,o=e.childFlags;if(2===o)n=P(t);else if(12&o){n=[];for(var r=0,i=t.length;r<i;r++)n.push(P(t[r]))}return M(n,o,e.key)}(e)}function U(){return L("",null)}function A(e,n,t,i){for(var s=e.length;t<s;t++){var u=e[t];if(!a(u)){var d=i+N+t;if(o(u))A(u,n,0,d);else{if(r(u))u=L(u,d);else{var f=u.key,p=l(f)&&f[0]===N;(81920&u.flags||p)&&(u=P(u)),u.flags|=65536,c(f)||p?u.key=d:u.key=i+f}n.push(u)}}}}function I(e,n){var t,i=1;if(a(n))t=n;else if(r(n))i=16,t=n;else if(o(n)){for(var s=n.length,u=0;u<s;u++){var d=n[u];if(a(d)||o(d)){A(n,t=t||n.slice(0,u),u,"");break}if(r(d))(t=t||n.slice(0,u)).push(L(d,N+u));else{var f=d.key,p=(81920&d.flags)>0,h=c(f),g=!h&&l(f)&&f[0]===N;p||h||g?(t=t||n.slice(0,u),(p||g)&&(d=P(d)),(h||g)&&(d.key=N+u),t.push(d)):t&&t.push(d),d.flags|=65536}}i=0===(t=t||n).length?1:8}else(t=n).flags|=65536,81920&n.flags&&(t=P(n)),i=2;return e.children=t,e.childFlags=i,e}var O="http://www.w3.org/1999/xlink",D="http://www.w3.org/XML/1998/namespace",F={"xlink:actuate":O,"xlink:arcrole":O,"xlink:href":O,"xlink:role":O,"xlink:show":O,"xlink:title":O,"xlink:type":O,"xml:base":D,"xml:lang":D,"xml:space":D},j={},R={};function T(e,n,t){var o=t.$EV;n?(j[e]||(R[e]=function(e){var n=function(n){var t="onClick"===e||"onDblClick"===e;if(t&&0!==n.button)n.stopPropagation();else{n.stopPropagation=B;var o={dom:document};Object.defineProperty(n,"currentTarget",{configurable:!0,get:function(){return o.dom}}),function(e,n,t,o,r){var i=n;for(;!c(i);){if(t&&i.disabled)return;var a=i.$EV;if(a){var s=a[o];if(s&&(r.dom=i,s.event?s.event(s.data,e):s(e),e.cancelBubble))return}i=i.parentNode}}(n,n.target,t,e,o)}};return document.addEventListener(E(e),n),n}(e),j[e]=0),o||(o=t.$EV={}),o[e]||j[e]++,o[e]=n):o&&o[e]&&(0==--j[e]&&(document.removeEventListener(E(e),R[e]),R[e]=null),o[e]=n)}function E(e){return e.substr(2).toLowerCase()}function B(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function q(e,n,t){if(e[n]){var o=e[n];o.event?o.event(o.data,t):o(t)}else{var r=n.toLowerCase();e[r]&&e[r](t)}}function V(e,n){var t=function(t){var o=this.$V;if(o){var r=o.props||f,i=o.dom;if(l(e))q(r,e,t);else for(var a=0;a<e.length;a++)q(r,e[a],t);if(s(n)){var c=this.$V,u=c.props||f;n(u,i,!1,c)}}};return Object.defineProperty(t,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),t}function z(e){return"checkbox"===e||"radio"===e}var _=V("onInput",W),X=V(["onClick","onChange"],W);function H(e){e.stopPropagation()}function W(e,n){var t=e.type,o=e.value,r=e.checked,a=e.multiple,s=e.defaultValue,l=!i(o);t&&t!==n.type&&n.setAttribute("type",t),i(a)||a===n.multiple||(n.multiple=a),i(s)||l||(n.defaultValue=s+""),z(t)?(l&&(n.value=o),i(r)||(n.checked=r)):l&&n.value!==o?(n.defaultValue=o,n.value=o):i(r)||(n.checked=r)}function Y(e,n){if("option"===e.type)!function(e,n){var t=e.props||f,r=e.dom;r.value=t.value,t.value===n||o(n)&&-1!==n.indexOf(t.value)?r.selected=!0:i(n)&&i(t.selected)||(r.selected=t.selected||!1)}(e,n);else{var t=e.children,r=e.flags;if(4&r)Y(t.$LI,n);else if(8&r)Y(t,n);else if(2===e.childFlags)Y(t,n);else if(12&e.childFlags)for(var a=0,s=t.length;a<s;a++)Y(t[a],n)}}H.wrapped=!0;var K=V("onChange",Q);function Q(e,n,t,o){var r=Boolean(e.multiple);if(i(e.multiple)||r===n.multiple||(n.multiple=r),1!==o.childFlags){var a=e.value;t&&i(a)&&(a=e.defaultValue),Y(o,a)}}var G=V("onInput",Z),J=V("onChange");function Z(e,n,t){var o=e.value,r=n.value;if(i(o)){if(t){var a=e.defaultValue;i(a)||a===r||(n.defaultValue=a,n.value=a)}}else r!==o&&(n.defaultValue=o,n.value=o)}function ee(e,n,t,o,r,i){64&e?W(o,t):256&e?Q(o,t,r,n):128&e&&Z(o,t,r),i&&(t.$V=n)}function ne(e,n,t){64&e?function(e,n){z(n.type)?(e.onchange=X,e.onclick=H):e.oninput=_}(n,t):256&e?function(e){e.onchange=K}(n):128&e&&function(e,n){e.oninput=G,n.onChange&&(e.onchange=J)}(n,t)}function te(e){return e.type&&z(e.type)?!i(e.checked):!i(e.value)}function oe(e){e&&(s(e)?e(null):e.current&&(e.current=null))}function re(e,n){e&&(s(e)?function(e,n){p.push(function(){return n(e)})}(n,e):void 0!==e.current&&(e.current=n))}function ie(e,n){ae(e),n&&b(e,n)}function ae(e){var n,t=e.flags,o=e.children;if(481&t){n=e.ref;var r=e.props;oe(n);var a=e.childFlags;if(!c(r))for(var l in r)switch(l){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":T(l,null,e.dom)}12&a?se(o):2===a&&ae(o)}else o&&(4&t?(s(o.componentWillUnmount)&&o.componentWillUnmount(),oe(e.ref),o.$UN=!0,ae(o.$LI)):8&t?(!i(n=e.ref)&&s(n.onComponentWillUnmount)&&n.onComponentWillUnmount(y(e),e.props||f),ae(o)):1024&t?ie(o,e.ref):8192&t&&12&e.childFlags&&se(o))}function se(e){for(var n=0,t=e.length;n<t;n++)ae(e[n])}function le(e){e.textContent=""}function ce(e,n,t){se(t),8192&n.flags?b(n,e):le(e)}function ue(e,n,t,o,r,a,u){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":T(e,t,o);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":o.autofocus=!!t;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":o[e]=!!t;break;case"defaultChecked":case"value":case"volume":if(a&&"value"===e)return;var d=i(t)?"":t;o[e]!==d&&(o[e]=d);break;case"style":!function(e,n,t){if(i(n))t.removeAttribute("style");else{var o,r,a=t.style;if(l(n))a.cssText=n;else if(i(e)||l(e))for(o in n)r=n[o],a.setProperty(o,r);else{for(o in n)(r=n[o])!==e[o]&&a.setProperty(o,r);for(o in e)i(n[o])&&a.removeProperty(o)}}}(n,t,o);break;case"dangerouslySetInnerHTML":var f=n&&n.__html||"",p=t&&t.__html||"";f!==p&&(i(p)||function(e,n){var t=document.createElement("i");return t.innerHTML=n,t.innerHTML===e.innerHTML}(o,p)||(c(u)||(12&u.childFlags?se(u.children):2===u.childFlags&&ae(u.children),u.children=null,u.childFlags=1),o.innerHTML=p));break;default:111===e.charCodeAt(0)&&110===e.charCodeAt(1)?function(e,n,t){var o=e.toLowerCase();if(s(n)||i(n)){var r=t[o];r&&r.wrapped||(t[o]=n)}else{var a=n.event;a&&s(a)&&(t[o]=function(e,n){return function(t){e(n.data,t)}}(a,n))}}(e,t,o):i(t)?o.removeAttribute(e):r&&F[e]?o.setAttributeNS(F[e],e,t):o.setAttribute(e,t)}}function de(e,n,t){var o=fe(e.render(n,e.state,t)),r=t;return s(e.getChildContext)&&(r=d(t,e.getChildContext())),e.$CX=r,o}function fe(e){return a(e)?e=U():r(e)?e=L(e,null):o(e)?e=M(e,0,null):16384&e.flags&&(e=P(e)),e}function pe(e,n,t,o,r){var a=e.flags|=16384;481&a?function(e,n,t,o,r){var a=e.flags,s=e.props,l=e.className,u=e.ref,d=e.children,f=e.childFlags;o=o||(32&a)>0;var p=function(e,n){return n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e.type,o);e.dom=p,i(l)||""===l||(o?p.setAttribute("class",l):p.className=l);if(16===f)ge(p,d);else if(1!==f){var h=o&&"foreignObject"!==e.type;2===f?(16384&d.flags&&(e.children=d=P(d)),pe(d,p,t,h,null)):8!==f&&4!==f||ve(d,p,t,h,null)}c(n)||g(n,p,r);c(s)||function(e,n,t,o,r){var i=!1,a=(448&n)>0;for(var s in a&&(i=te(t))&&ne(n,o,t),t)ue(s,null,t[s],o,r,i,null);a&&ee(n,e,o,t,!0,i)}(e,a,s,p,o);re(u,p)}(e,n,t,o,r):4&a?function(e,n,t,o,r){var i=function(e,n,t,o){var r=new n(t,o),i=r.$N=Boolean(n.getDerivedStateFromProps||r.getSnapshotBeforeUpdate);if(e.children=r,r.$BS=!1,r.context=o,r.props===f&&(r.props=t),i)r.state=x(r,t,r.state);else if(s(r.componentWillMount)){if(r.$BR=!0,r.componentWillMount(),r.$PSS){var a=r.state,l=r.$PS;if(c(a))r.state=l;else for(var u in l)a[u]=l[u];r.$PSS=!1,r.$PS=null}r.$BR=!1}return r.$LI=de(r,t,o),r}(e,e.type,e.props||f,t);pe(i.$LI,n,i.$CX,o,r),function(e,n){re(e,n),s(n.componentDidMount)&&p.push(function(e){return function(){e.$UPD=!0,e.componentDidMount(),e.$UPD=!1}}(n))}(e.ref,i),i.$UPD=!1}(e,n,t,o,r):8&a?function(e,n,t,o,r){var a=e.type,l=e.props||f,c=e.ref,u=fe(32768&e.flags?a(l,c,t):a(l,t));e.children=u,pe(u,n,t,o,r),function(e,n,t){i(n)||(s(n.onComponentWillMount)&&n.onComponentWillMount(e),s(n.onComponentDidMount)&&p.push(function(e,n,t){return function(){return e.onComponentDidMount(y(n),t)}}(n,t,e)))}(l,c,e)}(e,n,t,o,r):512&a||16&a?he(e,n,r):8192&a?function(e,n,t,o,r){var i=e.children;2===e.childFlags?pe(i,n,r,o,r):ve(i,n,t,o,r)}(e,n,t,o,r):1024&a&&function(e,n,t,o){pe(e.children,e.ref,n,!1,null);var r=U();he(r,t,o),e.dom=r.dom}(e,t,n,r)}function he(e,n,t){var o=e.dom=document.createTextNode(e.children);c(n)||g(n,o,t)}function ge(e,n){e.textContent=n}function ve(e,n,t,o,r){for(var i=0,a=e.length;i<a;i++){var s=e[i];16384&s.flags&&(e[i]=s=P(s)),pe(s,n,t,o,r)}}function me(e,n,t,o,r,l){var u=n.flags|=16384;e.flags!==u||e.type!==n.type||e.key!==n.key||0!=(2048&u)?16384&e.flags?function(e,n,t,o,r){ae(e),0!=(n.flags&e.flags&2033)?(pe(n,null,o,r,null),function(e,n,t){e.replaceChild(n,t)}(t,n.dom,e.dom)):(pe(n,t,o,r,y(e)),b(e,t))}(e,n,t,o,r):pe(n,t,o,r,l):481&u?function(e,n,t,o,r){var a,s=e.dom,l=e.props,c=n.props,u=!1,d=!1;if(n.dom=s,o=o||(32&r)>0,l!==c){var p=l||f;if((a=c||f)!==f)for(var h in(u=(448&r)>0)&&(d=te(a)),a){var g=p[h],v=a[h];g!==v&&ue(h,g,v,s,o,d,e)}if(p!==f)for(var m in p)a.hasOwnProperty(m)||i(p[m])||ue(m,p[m],null,s,o,d,e)}var y=n.children,b=n.className,w=n.ref,x=e.ref;e.className!==b&&(i(b)?s.removeAttribute("class"):o?s.setAttribute("class",b):s.className=b);4096&r?function(e,n){e.textContent!==n&&(e.textContent=n)}(s,y):ye(e.childFlags,n.childFlags,e.children,y,s,t,o&&"foreignObject"!==n.type,null,e);u&&ee(r,n,s,a,!1,d);x!==w&&(oe(x),re(w,s))}(e,n,o,r,u):4&u?function(e,n,t,o,r,i){var a=n.children=e.children;if(c(a))return;var l=n.props||f,u=n.ref,p=e.ref,h=a.state;if(a.$UPD=!0,!a.$N){if(s(a.componentWillReceiveProps)){if(a.$BR=!0,a.componentWillReceiveProps(l,o),a.$UN)return;a.$BR=!1}a.$PSS&&(h=d(h,a.$PS),a.$PSS=!1,a.$PS=null)}be(a,h,l,t,o,r,!1,i),p!==u&&(oe(p),re(u,a));a.$UPD=!1}(e,n,t,o,r,l):8&u?function(e,n,t,o,r,a){var l=!0,c=n.props||f,u=n.ref,d=e.props,p=!i(u),h=e.children;p&&s(u.onComponentShouldUpdate)&&(l=u.onComponentShouldUpdate(d,c));if(!1!==l){p&&s(u.onComponentWillUpdate)&&u.onComponentWillUpdate(d,c);var g=fe(n.type(c,o));me(h,g,t,o,r,a),n.children=g,p&&s(u.onComponentDidUpdate)&&u.onComponentDidUpdate(d,c)}else n.children=h}(e,n,t,o,r,l):16&u?function(e,n){var t=n.children,o=e.dom;t!==e.children&&(o.nodeValue=t);n.dom=o}(e,n):512&u?n.dom=e.dom:8192&u?function(e,n,t,o,r){var i=e.children,a=null;0==(2&n.childFlags)&&n.children.length>i.length&&(a=y(i[i.length-1]).nextSibling);ye(e.childFlags,n.childFlags,i,n.children,t,o,r,a,e)}(e,n,t,o,r):function(e,n,t){var o=e.ref,r=n.ref,i=n.children;if(ye(e.childFlags,n.childFlags,e.children,i,o,t,!1,null,e),n.dom=e.dom,o!==r&&!a(i)){var s=i.dom;v(o,s),h(r,s)}}(e,n,o)}function ye(e,n,t,o,r,i,a,s,l){switch(e){case 2:switch(n){case 2:me(t,o,r,i,a,s);break;case 1:ie(t,r);break;case 16:ae(t),ge(r,o);break;default:!function(e,n,t,o,r){ae(e),ve(n,t,o,r,y(e)),b(e,t)}(t,o,r,i,a)}break;case 1:switch(n){case 2:pe(o,r,i,a,s);break;case 1:break;case 16:ge(r,o);break;default:ve(o,r,i,a,s)}break;case 16:switch(n){case 16:!function(e,n,t){e!==n&&(""!==e?t.firstChild.nodeValue=n:t.textContent=n)}(t,o,r);break;case 2:le(r),pe(o,r,i,a,s);break;case 1:le(r);break;default:le(r),ve(o,r,i,a,s)}break;default:switch(n){case 16:se(t),ge(r,o);break;case 2:ce(r,l,t),pe(o,r,i,a,s);break;case 1:ce(r,l,t);break;default:var c=t.length,u=o.length;0===c?u>0&&ve(o,r,i,a,s):0===u?ce(r,l,t):8===n&&8===e?function(e,n,t,o,r,i,a,s,l){var c,u,d=i-1,f=a-1,p=0,h=0,g=e[h],v=n[h];e:{for(;g.key===v.key;){if(16384&v.flags&&(n[h]=v=P(v)),me(g,v,t,o,r,s),e[h]=v,++h>d||h>f)break e;g=e[h],v=n[h]}for(g=e[d],v=n[f];g.key===v.key;){if(16384&v.flags&&(n[f]=v=P(v)),me(g,v,t,o,r,s),e[d]=v,f--,h>--d||h>f)break e;g=e[d],v=n[f]}}if(h>d){if(h<=f)for(u=(c=f+1)<a?y(n[c]):s;h<=f;)16384&(v=n[h]).flags&&(n[h]=v=P(v)),h++,pe(v,t,o,r,u)}else if(h>f)for(;h<=d;)ie(e[h++],t);else{for(var m=h,b=h,x=d-h+1,k=f-h+1,N=[];p++<=k;)N.push(0);var S=x===i,C=!1,$=0,L=0;if(a<4||(x|k)<32)for(p=m;p<=d;p++)if(g=e[p],L<k){for(h=b;h<=f;h++)if(v=n[h],g.key===v.key){if(N[h-b]=p+1,S)for(S=!1;m<p;)ie(e[m++],t);$>h?C=!0:$=h,16384&v.flags&&(n[h]=v=P(v)),me(g,v,t,o,r,s),L++;break}!S&&h>f&&ie(g,t)}else S||ie(g,t);else{var M={};for(p=b;p<=f;p++)M[n[p].key]=p;for(p=m;p<=d;p++)if(g=e[p],L<k)if(void 0!==(h=M[g.key])){if(S)for(S=!1;p>m;)ie(e[m++],t);v=n[h],N[h-b]=p+1,$>h?C=!0:$=h,16384&v.flags&&(n[h]=v=P(v)),me(g,v,t,o,r,s),L++}else S||ie(g,t);else S||ie(g,t)}if(S)ce(t,l,e),ve(n,t,o,r,s);else if(C){var U=function(e){var n,t,o,r,i,a=e.slice(),s=[0],l=e.length;for(n=0;n<l;n++){var c=e[n];if(0!==c){if(t=s[s.length-1],e[t]<c){a[n]=t,s.push(n);continue}for(o=0,r=s.length-1;o<r;)e[s[i=(o+r)/2|0]]<c?o=i+1:r=i;c<e[s[o]]&&(o>0&&(a[n]=s[o-1]),s[o]=n)}}o=s.length,r=s[o-1];for(;o-- >0;)s[o]=r,r=a[r];return s}(N);for(h=U.length-1,p=k-1;p>=0;p--)0===N[p]?(16384&(v=n[$=p+b]).flags&&(n[$]=v=P(v)),pe(v,t,o,r,(c=$+1)<a?y(n[c]):s)):h<0||p!==U[h]?w(v=n[$=p+b],t,(c=$+1)<a?y(n[c]):s):h--}else if(L!==k)for(p=k-1;p>=0;p--)0===N[p]&&(16384&(v=n[$=p+b]).flags&&(n[$]=v=P(v)),pe(v,t,o,r,(c=$+1)<a?y(n[c]):s))}}(t,o,r,i,a,c,u,s,l):function(e,n,t,o,r,i,a,s){for(var l,c,u=i>a?a:i,d=0;d<u;d++)l=n[d],c=e[d],16384&l.flags&&(l=n[d]=P(l)),me(c,l,t,o,r,s),e[d]=l;if(i<a)for(d=u;d<a;d++)16384&(l=n[d]).flags&&(l=n[d]=P(l)),pe(l,t,o,r,s);else if(i>a)for(d=u;d<i;d++)ie(e[d],t)}(t,o,r,i,a,c,u,s)}}}function be(e,n,t,o,r,i,a,l){var c=e.state,u=e.props,f=Boolean(e.$N),h=s(e.shouldComponentUpdate);if(f&&(n=x(e,t,n!==c?d(c,n):n)),a||!h||h&&e.shouldComponentUpdate(t,n,r)){!f&&s(e.componentWillUpdate)&&e.componentWillUpdate(t,n,r),e.props=t,e.state=n,e.context=r;var g=null,v=de(e,t,r);f&&s(e.getSnapshotBeforeUpdate)&&(g=e.getSnapshotBeforeUpdate(u,c)),me(e.$LI,v,o,e.$CX,i,l),e.$LI=v,s(e.componentDidUpdate)&&function(e,n,t,o){p.push(function(){return e.componentDidUpdate(n,t,o)})}(e,u,c,g)}else e.props=t,e.state=n,e.context=r}"undefined"!=typeof document&&document.body;function we(e,n,t,o){!function(e,n,t,o){var r=n.$V;i(r)?i(e)||(16384&e.flags&&(e=P(e)),pe(e,n,o||f,!1,null),n.$V=e,r=e):i(e)?(ie(r,n),n.$V=null):(16384&e.flags&&(e=P(e)),me(r,e,n,o||f,!1,null),r=n.$V=e),p.length>0&&m(p),s(t)&&t(),s(k.renderComplete)&&k.renderComplete(r,n)}(e,n,t,o)}var xe=[],ke="undefined"!=typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout.bind(window);function Ne(e,n,t,o){s(n)&&(n=n(e.state,e.props,e.context));var r=e.$PS;if(i(r))e.$PS=n;else for(var a in n)r[a]=n[a];if(e.$PSS||e.$BR)e.$PSS=!0,e.$BR&&s(t)&&p.push(t.bind(e));else if(e.$UPD){if(1===xe.push(e)&&ke(Ce),s(t)){var l=e.$QU;l||(l=e.$QU=[]),l.push(t)}}else e.$PSS=!0,e.$UPD=!0,0===xe.length?$e(e,o,t):xe.push(e)}function Se(e){for(var n=e.$QU,t=0,o=n.length;t<o;t++)n[t].call(e);e.$QU=null}function Ce(){for(var e;e=xe.pop();){$e(e,!1,e.$QU?Se.bind(null,e):null)}}function $e(e,n,t){if(!e.$UN){if(n||!e.$BR){e.$PSS=!1;var o=e.$PS;e.$PS=null,e.$UPD=!0,be(e,d(e.state,o),e.props,y(e.$LI).parentNode,e.context,!1,n,null),e.$UPD=!1,p.length>0&&m(p)}else e.state=e.$PS,e.$PS=null;s(t)&&t.call(e)}}var Le=function(e,n){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.$N=!1,this.props=e||f,this.context=n||f};Le.prototype.forceUpdate=function(e){this.$UN||Ne(this,{},e,!0)},Le.prototype.setState=function(e,n){this.$UN||this.$BS||Ne(this,e,n,!1)},Le.prototype.render=function(e,n,t){return null};var Me=t(0),Pe=t.n(Me);t(1);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ie(e,n,t){return n&&Ae(e.prototype,n),t&&Ae(e,t),e}function Oe(e,n){return!n||"object"!==Ue(n)&&"function"!=typeof n?Re(e):n}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&je(e,n)}function je(e,n){return(je=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Ee=function e(n,t){Te(this,e),this.car=n,this.cdr=t,this.id=Pe()()},Be=function(e,n){if(e instanceof Ee){var t=n.findIndex(function(n){return n.id===e.id});n.splice(t,1),Be(e.car,n),Be(e.cdr,n)}};function qe(){return C(1,"div","null-ptr",C(32,"svg",null,[C(32,"line",null,null,1,{x1:"0",y1:"0",x2:"20",y2:"20"}),C(32,"line",null,null,1,{x1:"0",y1:"20",x2:"20",y2:"0"})],4,{width:"20",height:"20"}),2)}function Ve(){return C(1,"div","downwards-arrow",C(32,"svg",null,C(32,"path",null,null,1,{d:"m10 0l5 7l5-7l-5 3z",fill:"black"}),2,{width:"30",height:"7"}),2)}function ze(){return C(1,"div","rightwards-arrow",C(32,"svg",null,C(32,"path",null,null,1,{d:"m0 5l7 5l-7 5l3-5z",fill:"black"}),2,{width:"7",height:"20"}),2)}var _e=function(e){function n(e){var t;return Te(this,n),(t=Oe(this,De(n).call(this,e))).state={editable:!1},t.checkCancelOrConfirm=t.checkCancelOrConfirm.bind(Re(Re(t))),t.cancel=t.cancel.bind(Re(Re(t))),t.edit=t.edit.bind(Re(Re(t))),t}return Fe(n,Le),Ie(n,[{key:"componentDidMount",value:function(){null==this.props.thing&&this.setState({editable:!0})}},{key:"checkCancelOrConfirm",value:function(e){"Enter"==e.code?(this.props.change(e.target.value),this.cancel()):"Escape"==e.code&&this.cancel()}},{key:"cancel",value:function(){this.setState({editable:!1})}},{key:"edit",value:function(e){e.stopPropagation(),this.setState({editable:!0})}},{key:"renderInner",value:function(){var e=this;return this.state.editable?C(64,"input",null,null,1,{type:"text",onKeyDown:function(n){return e.checkCancelOrConfirm(n)},onFocusOut:this.cancel,defaultValue:this.props.thing},null,function(e){return e&&(e.focus()||e.select())}):C(1,"span",null,this.props.thing,0)}},{key:"render",value:function(){return C(1,"div","changeable-text",this.renderInner(),0,{onDblClick:this.edit})}}]),n}(),Xe=function(e){function n(e){var t;return Te(this,n),(t=Oe(this,De(n).call(this,e))).changeCar=t.changeCar.bind(Re(Re(t))),t.addNewNode=t.addNewNode.bind(Re(Re(t))),t.condRenderCar=t.condRenderCar.bind(Re(Re(t))),t.condRenderCdr=t.condRenderCdr.bind(Re(Re(t))),t.mouseOverCar=t.mouseOver.bind(Re(Re(t)),!0),t.mouseOverCdr=t.mouseOver.bind(Re(Re(t)),!1),t.mouseOut=t.mouseOut.bind(Re(Re(t))),t}return Fe(n,Le),Ie(n,[{key:"changeCar",value:function(e){var n=this.props.node;n.car=void 0!==e?e:n.car,this.props.updateNode(n)}},{key:"addNewNode",value:function(e){e.stopPropagation(),null==this.props.node.cdr&&this.props.addNewNode(this.props.node.id)}},{key:"condRenderCar",value:function(e){return e instanceof Ee?void 0:$(2,_e,{thing:e,change:this.changeCar})}},{key:"condRenderCdr",value:function(e){return $(2,e instanceof Ee?ze:qe)}},{key:"mouseOver",value:function(e,n){if(!document.querySelector(".app-wrapper").classList.contains("dragging-app"))if(e)Array.from(document.querySelectorAll('[data-car-id="'.concat(this.props.node.id,'"]'))).map(function(e){e.classList.add("output-highlighted")});else{var t=this.props.node.cdr;null!=t?(Array.from(document.querySelectorAll('[data-node-id="'.concat(t.id,'"]'))).map(function(e){e.classList.add("view-outlined")}),Array.from(document.querySelectorAll('[data-cdr-id="'.concat(t.id,'"]'))).map(function(e){e.classList.add("output-outlined")})):Array.from(document.querySelectorAll('[data-cdr-id="'.concat(this.props.node.id,'-empty"]'))).map(function(e){e.classList.add("output-highlighted")})}}},{key:"mouseOut",value:function(e){Array.from(document.querySelectorAll(".output-highlighted")).map(function(e){e.classList.remove("output-highlighted")}),Array.from(document.querySelectorAll(".output-outlined")).map(function(e){e.classList.remove("output-outlined")}),Array.from(document.querySelectorAll(".view-outlined")).map(function(e){e.classList.remove("view-outlined")})}},{key:"render",value:function(){var e=this.props.node;return C(1,"div","boxy-wrapper",[C(1,"div","boxy",[C(1,"div","boxy-car",this.condRenderCar(e.car),0,{onMouseOver:this.mouseOverCar,onMouseOut:this.mouseOut}),C(1,"div","boxy-cdr",this.condRenderCdr(e.cdr),0,{onMouseOver:this.mouseOverCdr,onMouseOut:this.mouseOut,onDblClick:this.addNewNode}),e.car instanceof Ee&&$(2,Ve),e.cdr instanceof Ee&&$(2,n,{node:e.cdr,updateNode:this.props.updateNode,addNewNode:this.props.addNewNode})],0),e.car instanceof Ee&&$(2,n,{node:e.car,updateNode:this.props.updateNode,addNewNode:this.props.addNewNode})],0,{"data-node-id":e.id})}}]),n}(),He=function(e){function n(e){var t;return Te(this,n),(t=Oe(this,De(n).call(this,e))).state={nodes:e.nodes||[],allNodes:e.allNodes||[],draggingId:null,draggingEl:null,draggingNode:null,dragging:!1,renderMode:"cons",resizing:!1,outputHeight:300},t.addNewNode=t.addNewNode.bind(Re(Re(t))),t.getNodeFromId=t.getNodeFromId.bind(Re(Re(t))),t.getNodeIndex=t.getNodeIndex.bind(Re(Re(t))),t.updateNode=t.updateNode.bind(Re(Re(t))),t.deleteNode=t.deleteNode.bind(Re(Re(t))),t.changeTextRenderMode=t.changeTextRenderMode.bind(Re(Re(t))),t.renderText=t.renderText.bind(Re(Re(t))),t.startDragging=t.startDragging.bind(Re(Re(t))),t.isDragging=t.isDragging.bind(Re(Re(t))),t.stopDragging=t.stopDragging.bind(Re(Re(t))),t.mouseMove=t.mouseMove.bind(Re(Re(t))),t.mouseOut=t.mouseOut.bind(Re(Re(t))),t}return Fe(n,Le),Ie(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("mousedown",function(n){n.target&&n.target.classList.contains("app-resize-handle")&&1===n.buttons&&e.setState({resizing:!0})}),window.addEventListener("mousemove",function(n){e.state.resizing&&e.setState({outputHeight:Math.max(120,Math.min(window.innerHeight-n.clientY-15,window.innerHeight-100))})}),window.addEventListener("mouseup",function(n){e.setState({resizing:!1})})}},{key:"addNewNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this.state,t=n.nodes,o=n.allNodes,r=new Ee(null,null);if(o.push(r),void 0===e)t.push(o.length-1);else{var i=this.getNodeFromId(e);i.cdr=r,this.updateNode(i)}this.setState({nodes:t,allNodes:o})}},{key:"getNodeFromId",value:function(e){return this.state.allNodes.find(function(n){return n.id===e})}},{key:"getNodeIndex",value:function(e){return this.state.allNodes.findIndex(function(n){return n.id===e.id})}},{key:"updateNode",value:function(e){var n=this.state.allNodes;n[this.getNodeIndex(e)]=e,this.setState({allNodes:n})}},{key:"deleteNode",value:function(e){var n=this,t=this.state,o=t.nodes,r=t.allNodes,i=this.state.allNodes.filter(function(n){return null!=n.cdr&&n.cdr.id===e.id}),a=this.state.allNodes.filter(function(n){return n.car instanceof Ee&&n.car.id===e.id});if(confirm("Are you sure you want to delete this node?")){var s=o.map(function(e){return r[e]});Be(e,r),o=s.filter(function(n){return n.id!==e.id}).map(function(e){return n.getNodeIndex(e)}),i.length&&(i[0].cdr=null),a.length&&(a[0].car=null),this.setState({nodes:o,allNodes:r})}}},{key:"changeTextRenderMode",value:function(e){this.setState({renderMode:e.target.value})}},{key:"renderText",value:function(){var e=this;switch(this.state.renderMode){case"cons":return this.state.nodes.map(function(n){return function e(n,t){return null==n?"empty":'(cons <span data-car-id="'.concat(n.id,'">').concat(n.car instanceof Ee?e(n.car,t+1):null==n.car?'""':/^\d+$|^'[\S]+$/.test(n.car)?n.car:'"'.concat(n.car,'"'),"</span>").concat(null==n.cdr?" ":"\n"+" ".repeat(6*t),'<span data-cdr-id="').concat(null!=n.cdr?n.cdr.id:n.id+"-empty",'">').concat(e(n.cdr,t+1),"</span>)")}(e.state.allNodes[n],1)}).join("\n\n");case"list":return this.state.nodes.map(function(n){return'(list <span data-car-id="'.concat(e.state.allNodes[n].id,'">').concat(function e(n,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==n?"":(o.push((n.car instanceof Ee?"".concat(r?"":"\n"+" ".repeat(6*t),'<span data-car-id="').concat(n.id,'">(list ').concat(e(n.car,t+1,[],!0).join(" ").replace(/\s+<\//g,"</"),")</span>\n").concat(" ".repeat(6*t-1)):'<span data-car-id="'.concat(n.id,'">').concat(null==n.car?'""':/^\d+$|^'[\S]+$/.test(n.car)?n.car:'"'.concat(n.car,'"'),"</span>"))+'<span data-cdr-id="'.concat(null!=n.cdr?n.cdr.id:n.id+"-empty",'">')),e(n.cdr,t,o),o.push("</span>"),o)}(e.state.allNodes[n],1,[],!0).join(" ").replace(/\s+<\//g,"</"),"</span>)")}).join("\n\n");case"quot":return this.state.nodes.map(function(n){return"'(<span data-car-id=\"".concat(e.state.allNodes[n].id,'">').concat(function e(n,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==n?"":(o.push((n.car instanceof Ee?"".concat(r?"":"\n"+" ".repeat(2*t),'<span data-car-id="').concat(n.id,'">(').concat(e(n.car,t+1,[],!0).join(" ").replace(/\s+<\//g,"</"),")</span>\n").concat(" ".repeat(2*t-1)):'<span data-car-id="'.concat(n.id,'">').concat(null==n.car?'""':/^\d+$/.test(n.car)?n.car:/^'[\S]+$/.test(n.car)?n.car.slice(1):'"'.concat(n.car,'"'),"</span>"))+'<span data-cdr-id="'.concat(null!=n.cdr?n.cdr.id:n.id+"-empty",'">')),e(n.cdr,t,o),o.push("</span>"),o)}(e.state.allNodes[n],1,[],!0).join(" ").replace(/\s+<\//g,"</"),"</span>)")}).join("\n\n")}}},{key:"startDragging",value:function(e){1===e.buttons&&e.target.closest(".boxy-wrapper")&&this.setState({mouseX:e.clientX,mouseY:e.clientY,draggingId:e.target.closest(".boxy-wrapper").dataset.nodeId})}},{key:"isDragging",value:function(e){var n=this;if(this.state.dragging&&this.state.draggingEl&&1===e.buttons)this.state.draggingEl.style.left="".concat(e.clientX-this.state.offsetX,"px"),this.state.draggingEl.style.top="".concat(e.clientY-this.state.offsetY,"px"),Array.from(document.querySelectorAll(".drag-active")).map(function(e){e.classList.remove("drag-active")}),document.elementFromPoint(e.clientX,e.clientY).closest(".view-controls")&&document.elementFromPoint(e.clientX,e.clientY).classList.add("drag-active");else if(this.state.draggingId&&1===e.buttons&&(Math.abs(this.state.mouseX-e.clientX)>5||Math.abs(this.state.mouseY-e.clientY)>5)){var t=document.querySelector('[data-node-id="'.concat(this.state.draggingId,'"]')),o=this.state.mouseY-t.getBoundingClientRect().top;t.classList.add("dragging"),t.style.left="".concat(e.clientX- -10,"px"),t.style.top="".concat(e.clientY-o,"px"),this.setState(function(e){return{mouseX:null,mouseY:null,offsetX:-10,offsetY:o,draggingEl:t,draggingNode:n.getNodeFromId(e.draggingId),dragging:!0}})}}},{key:"stopDragging",value:function(e){var n=this,t=this.state.draggingEl;if(t){var o=document.elementFromPoint(e.clientX,e.clientY);if(o.closest(".boxy-car, .boxy-cdr")){var r=o.closest(".boxy-car, .boxy-cdr"),i=r.classList.contains("boxy-cdr"),a=r.closest(".boxy-wrapper").dataset.nodeId,s=this.state.allNodes.filter(function(e){return e.cdr&&e.cdr.id===n.state.draggingId}),l=this.state.allNodes.filter(function(e){return e.car instanceof Ee&&e.car.id===n.state.draggingId}),c=this.getNodeFromId(a),u=this.state,d=u.nodes,f=u.allNodes;if(s.length&&(s[0].cdr=null),l.length&&(l[0].car=null),i)c.cdr instanceof Ee&&d.push(this.getNodeIndex(c.cdr)),c.cdr=this.state.draggingNode;else{if(c.car instanceof Ee)d.push(this.getNodeIndex(c.car));else if(null!=c.car){var p=new Ee(c.car,null);f.push(p),d.push(f.length-1)}c.car=this.state.draggingNode}var h=this.getNodeIndex(this.state.draggingNode);d=d.filter(function(e){return e!==h}),this.setState({nodes:d,allNodes:f})}else{var g=["add-to-nodes","dup-node","delete-node"].filter(function(e){return o.className.includes(e)});if(g.length)switch(g[0]){case"add-to-nodes":if(!this.state.nodes.includes(this.getNodeIndex(this.state.draggingNode))){var v=this.state.allNodes.filter(function(e){return e.cdr&&e.cdr.id===n.state.draggingId}),m=this.state.allNodes.filter(function(e){return e.car instanceof Ee&&e.car.id===n.state.draggingId}),y=this.state.nodes;v.length&&(v[0].cdr=null),m.length&&(m[0].car=null),y.push(this.getNodeIndex(this.state.draggingNode)),this.setState({nodes:y});break}case"dup-node":var b=this.state,w=b.nodes,x=b.allNodes;!function e(n,t){if(null==n)return null;if(!(n instanceof Ee))return n;var o=new Ee(e(n.car,t),e(n.cdr,t));return t.push(o),o}(this.state.draggingNode,x),w.push(x.length-1),this.setState({nodes:w,allNodes:x});break;case"delete-node":this.deleteNode(this.state.draggingNode)}}t.classList.remove("dragging"),t.style.top=null,t.style.left=null}this.state.dragging&&this.setState({draggingId:null,draggingEl:null,draggingNode:null,dragging:!1})}},{key:"mouseMove",value:function(e){if(e.stopPropagation(),Array.from(document.querySelectorAll(".view-highlighted")).map(function(e){e.classList.remove("view-highlighted")}),Array.from(document.querySelectorAll(".view-outlined")).map(function(e){e.classList.remove("view-outlined")}),Array.from(document.querySelectorAll(".output-highlighted")).map(function(e){e.classList.remove("output-highlighted")}),Array.from(document.querySelectorAll(".output-outlined")).map(function(e){e.classList.remove("output-outlined")}),"SPAN"===e.target.tagName){var n=e.target;if(n.dataset.carId)Array.from(document.querySelectorAll('[data-node-id="'.concat(n.dataset.carId,'"] > .boxy > .boxy-car'))).map(function(e){e.classList.add("view-highlighted")}),n.classList.add("output-highlighted");else if(n.dataset.cdrId){var t='[data-node-id="'.concat(n.dataset.cdrId,'"]');/-empty/.test(n.dataset.cdrId)?(t=t.replace("-empty","")+" > .boxy > .boxy-cdr",Array.from(document.querySelectorAll(t)).map(function(e){e.classList.add("view-highlighted")}),n.classList.add("output-highlighted")):(Array.from(document.querySelectorAll(t)).map(function(e){e.classList.add("view-outlined")}),n.classList.add("output-outlined"))}}}},{key:"mouseOut",value:function(){Array.from(document.querySelectorAll(".view-highlighted")).map(function(e){e.classList.remove("view-highlighted")}),Array.from(document.querySelectorAll(".view-outlined")).map(function(e){e.classList.remove("view-outlined")}),Array.from(document.querySelectorAll(".output-highlighted")).map(function(e){e.classList.remove("output-highlighted")}),Array.from(document.querySelectorAll(".output-outlined")).map(function(e){e.classList.remove("output-outlined")})}},{key:"render",value:function(){var e=this;return C(1,"div",["app-wrapper",this.state.dragging?"dragging-app":"",this.state.resizing?"resizing-app":""].join(" "),[C(1,"div","app-view",this.state.nodes.map(function(n){return $(2,Xe,{node:e.state.allNodes[n],updateNode:e.updateNode,addNewNode:e.addNewNode})}),0,{onDblClick:function(n){e.addNewNode()},style:{height:"".concat(window.innerHeight-this.state.outputHeight-20,"px")}}),C(1,"div","app-output-window",[C(1,"div","app-resize-handle"),C(1,"div","app-output",[C(1,"div","view-controls",[C(1,"em","add-to-nodes","Make separate list",16),C(1,"br"),C(1,"em","dup-node","Duplicate node",16),C(1,"br"),C(1,"em","delete-node","Delete node",16)],4),C(256,"select",null,["cons","list","quot"].map(function(n){return C(1,"option",null,[L("("),n,L(" ...)")],0,{value:n,checked:e.state.renderMode===n})}),0,{onChange:this.changeTextRenderMode}),C(1,"pre",null,null,1,{onMouseMove:this.mouseMove,onMouseOut:this.mouseOut,dangerouslySetInnerHTML:{__html:this.renderText()}})],4)],4,{style:{height:"".concat(this.state.outputHeight,"px")}})],4,{onMouseDown:this.startDragging,onMouseMove:this.isDragging,onMouseUp:this.stopDragging})}}]),n}(),We=new Ee("A",null),Ye=new Ee("B",We),Ke=new Ee("C",Ye),Qe=new Ee("D",null),Ge=new Ee(Ke,Qe),Je=new Ee("E",Ge),Ze=new Ee("F",null),en=new Ee("G",Ze);we($(2,He,{nodes:[8],allNodes:[We,Ye,Ke,Qe,Ge,Je,Ze,en,new Ee(en,Je)]}),document.querySelector("main"))}]);