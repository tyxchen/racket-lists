!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){var o=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var t="",n=o.getRandomValues(new Uint8Array(e));0<e--;)t+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz~"[63&n[e]];return t}},function(e,t,n){var o=n(2);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'body {\n    display: flex;\n    flex-direction: column;\n    font-family: sans-serif;\n    height: 100vh;\n    margin: 0;\n}\n\n.app-main {\n    flex: 1;\n    padding: 2em;\n    padding-bottom: 1em;\n}\n\n.app-output {\n    height: 300px;\n    padding: 2em;\n    padding-top: 1em;\n    border-top: 1px solid;\n}\n\n.boxy {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n}\n\n.boxy-car, .boxy-cdr {\n    position: relative;\n    min-width: 20px;\n    height: 20px;\n    background-color: white;\n    border: 1px solid;\n}\n\n.boxy-car:hover, .boxy-cdr:hover {\n    background-color: rgb(255, 255, 100);\n}\n\n.boxy + .boxy-wrapper {\n    margin-top: 10px;\n}\n\n.boxy-wrapper + .boxy-wrapper {\n    margin-top: 20px;\n}\n\n.boxy-car {\n    font-family: monospace;\n    line-height: 20px;\n    text-align: center;\n    padding: 0 4px;\n}\n\n.boxy-cdr:not(:last-child) {\n    margin-right: 20px;\n}\n\n.dragging {\n    position: fixed;\n    opacity: .7;\n    box-shadow: 0 0 15px gold;\n    z-index: 100;\n}\n\n.drag-active {\n    background-color: lightgreen !important;\n    box-shadow: 0 0 15px skyblue;\n}\n\nline {\n    stroke: black;\n}\n\n.downwards-arrow {\n    position: absolute;\n    top: 10px;\n    height: 100%;\n    width: 30px;\n    pointer-events: none;\n}\n\n.rightwards-arrow {\n    position: absolute;\n    left: 50%;\n    width: 31px;\n    height: 100%;\n    pointer-events: none;\n}\n\n.downwards-arrow svg {\n    position: absolute;\n    bottom: 0;\n}\n\n.rightwards-arrow svg {\n    position: absolute;\n    right: 0;\n}\n\n.downwards-arrow::before {\n    position: absolute;\n    left: calc(50% - 1px);\n    content: "";\n    width: 2px;\n    height: 100%;\n    background: black;\n}\n\n.rightwards-arrow::before {\n    position: absolute;\n    top: calc(50% - 1px);\n    content: "";\n    height: 2px;\n    width: 100%;\n    background: black;\n}\n\n.changeable-text {\n    width: 100%;\n    height: 100%;\n}\n\n.changeable-text span {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.output-highlighted, .view-highlighted {\n    background-color: rgb(255, 255, 100);\n}\n\n.output-outlined, .view-outlined {\n    outline: 2px solid gold;\n}\n\n.add-to-nodes {\n    display: inline-block;\n    margin-top: 20px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.add-to-nodes:hover {\n    background: lightgreen;\n}\n',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(o),i=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(i).concat([r]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var o={},r=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),i=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),a=null,s=0,l=[],c=n(5);function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(v(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function d(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function f(e,t){var n=i(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=l[l.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=i(e.insertAt.before,n);n.insertBefore(t,r)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function h(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return n.nc}();o&&(e.attrs.nonce=o)}return g(t,e.attrs),f(e,t),t}function g(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var l=s++;n=a||(a=h(t)),o=y.bind(null,n,l,!1),r=y.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),f(e,t),t}(t),o=function(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=c(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),r=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),o=function(e,t){var n=t.css,o=t.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){p(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=d(e,t);return u(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&u(d(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=m(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,t,n){"use strict";n.r(t);var o=Array.isArray;function r(e){var t=typeof e;return"string"===t||"number"===t}function i(e){return u(e)||c(e)}function a(e){return c(e)||!1===e||function(e){return!0===e}(e)||u(e)}function s(e){return"function"==typeof e}function l(e){return"string"==typeof e}function c(e){return null===e}function u(e){return void 0===e}function d(e,t){var n={};if(e)for(var o in e)n[o]=e[o];if(t)for(var r in t)n[r]=t[r];return n}var f={},p=[];function h(e,t){e.appendChild(t)}function g(e,t,n){c(n)?h(e,t):e.insertBefore(t,n)}function v(e,t){e.removeChild(t)}function m(e){for(var t;void 0!==(t=e.shift());)t()}function y(e){for(var t,n;e;){if(2033&(t=e.flags))return e.dom;n=e.children,e=8192&t?2===e.childFlags?n:n[0]:4&t?n.$LI:n}return null}function b(e,t){var n=e.flags;if(2033&n)v(t,e.dom);else{var o=e.children;if(4&n)b(o.$LI,t);else if(8&n)b(o,t);else if(8192&n)if(2===e.childFlags)b(o,t);else for(var r=0,i=o.length;r<i;r++)b(o[r],t)}}function w(e,t,n){var o=e.flags;if(2033&o)g(t,e.dom,n);else{var r=e.children;if(4&o)w(r.$LI,t,n);else if(8&o)w(r,t,n);else if(8192&o)if(2===e.childFlags)w(r,t,n);else for(var i=0,a=r.length;i<a;i++)w(r[i],t,n)}}function x(e,t,n){return e.constructor.getDerivedStateFromProps?d(n,e.constructor.getDerivedStateFromProps(t,n)):n}var k={componentComparator:null,createVNode:null,renderComplete:null},N="$";function S(e,t,n,o,r,i,a,s){this.childFlags=e,this.children=t,this.className=n,this.dom=null,this.flags=o,this.key=void 0===r?null:r,this.props=void 0===i?null:i,this.ref=void 0===a?null:a,this.type=s}function C(e,t,n,o,r,i,a,l){var c=void 0===r?1:r,u=new S(c,o,n,e,a,i,l,t),d=k.createVNode;return s(d)&&d(u),0===c&&L(u,u.children),u}function $(e,t,n,o,r){0!=(2&e)&&(t.prototype&&t.prototype.render?e=4:t.render?(e=32776,t=t.render):e=8);var a=t.defaultProps;if(!i(a))for(var l in n||(n={}),a)u(n[l])&&(n[l]=a[l]);if((8&e)>0&&0==(32768&e)){var c=t.defaultHooks;if(!i(c))if(r)for(var d in c)u(r[d])&&(r[d]=c[d]);else r=c}var f=new S(1,null,null,e,o,n,r,t),p=k.createVNode;return s(p)&&p(f),f}function U(e,t){return new S(1,i(e)?"":e,null,16,t,null,null,null)}function M(e,t,n){var o=C(8192,8192,null,e,t,null,n,null);switch(o.childFlags){case 1:o.children=P(),o.childFlags=2;break;case 16:o.children=[U(e)],o.childFlags=4}return o}function O(e){var t=-81921&e.flags,n=e.props;if(14&t&&!c(n)){var o=n;for(var r in n={},o)n[r]=o[r]}return 0==(8192&t)?new S(e.childFlags,e.children,e.className,t,e.key,n,e.ref,e.type):function(e){var t,n=e.children,o=e.childFlags;if(2===o)t=O(n);else if(12&o){t=[];for(var r=0,i=n.length;r<i;r++)t.push(O(n[r]))}return M(t,o,e.key)}(e)}function P(){return U("",null)}function I(e,t,n,i){for(var s=e.length;n<s;n++){var u=e[n];if(!a(u)){var d=i+N+n;if(o(u))I(u,t,0,d);else{if(r(u))u=U(u,d);else{var f=u.key,p=l(f)&&f[0]===N;(81920&u.flags||p)&&(u=O(u)),u.flags|=65536,c(f)||p?u.key=d:u.key=i+f}t.push(u)}}}}function L(e,t){var n,i=1;if(a(t))n=t;else if(r(t))i=16,n=t;else if(o(t)){for(var s=t.length,u=0;u<s;u++){var d=t[u];if(a(d)||o(d)){I(t,n=n||t.slice(0,u),u,"");break}if(r(d))(n=n||t.slice(0,u)).push(U(d,N+u));else{var f=d.key,p=(81920&d.flags)>0,h=c(f),g=!h&&l(f)&&f[0]===N;p||h||g?(n=n||t.slice(0,u),(p||g)&&(d=O(d)),(h||g)&&(d.key=N+u),n.push(d)):n&&n.push(d),d.flags|=65536}}i=0===(n=n||t).length?1:8}else(n=t).flags|=65536,81920&t.flags&&(n=O(t)),i=2;return e.children=n,e.childFlags=i,e}var D="http://www.w3.org/1999/xlink",F="http://www.w3.org/XML/1998/namespace",R={"xlink:actuate":D,"xlink:arcrole":D,"xlink:href":D,"xlink:role":D,"xlink:show":D,"xlink:title":D,"xlink:type":D,"xml:base":F,"xml:lang":F,"xml:space":F},j={},B={};function T(e,t,n){var o=n.$EV;t?(j[e]||(B[e]=function(e){var t=function(t){var n="onClick"===e||"onDblClick"===e;if(n&&0!==t.button)t.stopPropagation();else{t.stopPropagation=A;var o={dom:document};Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return o.dom}}),function(e,t,n,o,r){var i=t;for(;!c(i);){if(n&&i.disabled)return;var a=i.$EV;if(a){var s=a[o];if(s&&(r.dom=i,s.event?s.event(s.data,e):s(e),e.cancelBubble))return}i=i.parentNode}}(t,t.target,n,e,o)}};return document.addEventListener(E(e),t),t}(e),j[e]=0),o||(o=n.$EV={}),o[e]||j[e]++,o[e]=t):o&&o[e]&&(0==--j[e]&&(document.removeEventListener(E(e),B[e]),B[e]=null),o[e]=t)}function E(e){return e.substr(2).toLowerCase()}function A(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function q(e,t,n){if(e[t]){var o=e[t];o.event?o.event(o.data,n):o(n)}else{var r=t.toLowerCase();e[r]&&e[r](n)}}function V(e,t){var n=function(n){var o=this.$V;if(o){var r=o.props||f,i=o.dom;if(l(e))q(r,e,n);else for(var a=0;a<e.length;a++)q(r,e[a],n);if(s(t)){var c=this.$V,u=c.props||f;t(u,i,!1,c)}}};return Object.defineProperty(n,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),n}function X(e){return"checkbox"===e||"radio"===e}var _=V("onInput",H),Y=V(["onClick","onChange"],H);function W(e){e.stopPropagation()}function H(e,t){var n=e.type,o=e.value,r=e.checked,a=e.multiple,s=e.defaultValue,l=!i(o);n&&n!==t.type&&t.setAttribute("type",n),i(a)||a===t.multiple||(t.multiple=a),i(s)||l||(t.defaultValue=s+""),X(n)?(l&&(t.value=o),i(r)||(t.checked=r)):l&&t.value!==o?(t.defaultValue=o,t.value=o):i(r)||(t.checked=r)}function K(e,t){if("option"===e.type)!function(e,t){var n=e.props||f,r=e.dom;r.value=n.value,n.value===t||o(t)&&-1!==t.indexOf(n.value)?r.selected=!0:i(t)&&i(n.selected)||(r.selected=n.selected||!1)}(e,t);else{var n=e.children,r=e.flags;if(4&r)K(n.$LI,t);else if(8&r)K(n,t);else if(2===e.childFlags)K(n,t);else if(12&e.childFlags)for(var a=0,s=n.length;a<s;a++)K(n[a],t)}}W.wrapped=!0;var Q=V("onChange",z);function z(e,t,n,o){var r=Boolean(e.multiple);if(i(e.multiple)||r===t.multiple||(t.multiple=r),1!==o.childFlags){var a=e.value;n&&i(a)&&(a=e.defaultValue),K(o,a)}}var G=V("onInput",Z),J=V("onChange");function Z(e,t,n){var o=e.value,r=t.value;if(i(o)){if(n){var a=e.defaultValue;i(a)||a===r||(t.defaultValue=a,t.value=a)}}else r!==o&&(t.defaultValue=o,t.value=o)}function ee(e,t,n,o,r,i){64&e?H(o,n):256&e?z(o,n,r,t):128&e&&Z(o,n,r),i&&(n.$V=t)}function te(e,t,n){64&e?function(e,t){X(t.type)?(e.onchange=Y,e.onclick=W):e.oninput=_}(t,n):256&e?function(e){e.onchange=Q}(t):128&e&&function(e,t){e.oninput=G,t.onChange&&(e.onchange=J)}(t,n)}function ne(e){return e.type&&X(e.type)?!i(e.checked):!i(e.value)}function oe(e){e&&(s(e)?e(null):e.current&&(e.current=null))}function re(e,t){e&&(s(e)?function(e,t){p.push(function(){return t(e)})}(t,e):void 0!==e.current&&(e.current=t))}function ie(e,t){ae(e),t&&b(e,t)}function ae(e){var t,n=e.flags,o=e.children;if(481&n){t=e.ref;var r=e.props;oe(t);var a=e.childFlags;if(!c(r))for(var l in r)switch(l){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":T(l,null,e.dom)}12&a?se(o):2===a&&ae(o)}else o&&(4&n?(s(o.componentWillUnmount)&&o.componentWillUnmount(),oe(e.ref),o.$UN=!0,ae(o.$LI)):8&n?(!i(t=e.ref)&&s(t.onComponentWillUnmount)&&t.onComponentWillUnmount(y(e),e.props||f),ae(o)):1024&n?ie(o,e.ref):8192&n&&12&e.childFlags&&se(o))}function se(e){for(var t=0,n=e.length;t<n;t++)ae(e[t])}function le(e){e.textContent=""}function ce(e,t,n){se(n),8192&t.flags?b(t,e):le(e)}function ue(e,t,n,o,r,a,u){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":T(e,n,o);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":o.autofocus=!!n;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":o[e]=!!n;break;case"defaultChecked":case"value":case"volume":if(a&&"value"===e)return;var d=i(n)?"":n;o[e]!==d&&(o[e]=d);break;case"style":!function(e,t,n){if(i(t))n.removeAttribute("style");else{var o,r,a=n.style;if(l(t))a.cssText=t;else if(i(e)||l(e))for(o in t)r=t[o],a.setProperty(o,r);else{for(o in t)(r=t[o])!==e[o]&&a.setProperty(o,r);for(o in e)i(t[o])&&a.removeProperty(o)}}}(t,n,o);break;case"dangerouslySetInnerHTML":var f=t&&t.__html||"",p=n&&n.__html||"";f!==p&&(i(p)||function(e,t){var n=document.createElement("i");return n.innerHTML=t,n.innerHTML===e.innerHTML}(o,p)||(c(u)||(12&u.childFlags?se(u.children):2===u.childFlags&&ae(u.children),u.children=null,u.childFlags=1),o.innerHTML=p));break;default:111===e.charCodeAt(0)&&110===e.charCodeAt(1)?function(e,t,n){var o=e.toLowerCase();if(s(t)||i(t)){var r=n[o];r&&r.wrapped||(n[o]=t)}else{var a=t.event;a&&s(a)&&(n[o]=function(e,t){return function(n){e(t.data,n)}}(a,t))}}(e,n,o):i(n)?o.removeAttribute(e):r&&R[e]?o.setAttributeNS(R[e],e,n):o.setAttribute(e,n)}}function de(e,t,n){var o=fe(e.render(t,e.state,n)),r=n;return s(e.getChildContext)&&(r=d(n,e.getChildContext())),e.$CX=r,o}function fe(e){return a(e)?e=P():r(e)?e=U(e,null):o(e)?e=M(e,0,null):16384&e.flags&&(e=O(e)),e}function pe(e,t,n,o,r){var a=e.flags|=16384;481&a?function(e,t,n,o,r){var a=e.flags,s=e.props,l=e.className,u=e.ref,d=e.children,f=e.childFlags;o=o||(32&a)>0;var p=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e.type,o);e.dom=p,i(l)||""===l||(o?p.setAttribute("class",l):p.className=l);if(16===f)ge(p,d);else if(1!==f){var h=o&&"foreignObject"!==e.type;2===f?(16384&d.flags&&(e.children=d=O(d)),pe(d,p,n,h,null)):8!==f&&4!==f||ve(d,p,n,h,null)}c(t)||g(t,p,r);c(s)||function(e,t,n,o,r){var i=!1,a=(448&t)>0;for(var s in a&&(i=ne(n))&&te(t,o,n),n)ue(s,null,n[s],o,r,i,null);a&&ee(t,e,o,n,!0,i)}(e,a,s,p,o);re(u,p)}(e,t,n,o,r):4&a?function(e,t,n,o,r){var i=function(e,t,n,o){var r=new t(n,o),i=r.$N=Boolean(t.getDerivedStateFromProps||r.getSnapshotBeforeUpdate);if(e.children=r,r.$BS=!1,r.context=o,r.props===f&&(r.props=n),i)r.state=x(r,n,r.state);else if(s(r.componentWillMount)){if(r.$BR=!0,r.componentWillMount(),r.$PSS){var a=r.state,l=r.$PS;if(c(a))r.state=l;else for(var u in l)a[u]=l[u];r.$PSS=!1,r.$PS=null}r.$BR=!1}return r.$LI=de(r,n,o),r}(e,e.type,e.props||f,n);pe(i.$LI,t,i.$CX,o,r),function(e,t){re(e,t),s(t.componentDidMount)&&p.push(function(e){return function(){e.$UPD=!0,e.componentDidMount(),e.$UPD=!1}}(t))}(e.ref,i),i.$UPD=!1}(e,t,n,o,r):8&a?function(e,t,n,o,r){var a=e.type,l=e.props||f,c=e.ref,u=fe(32768&e.flags?a(l,c,n):a(l,n));e.children=u,pe(u,t,n,o,r),function(e,t,n){i(t)||(s(t.onComponentWillMount)&&t.onComponentWillMount(e),s(t.onComponentDidMount)&&p.push(function(e,t,n){return function(){return e.onComponentDidMount(y(t),n)}}(t,n,e)))}(l,c,e)}(e,t,n,o,r):512&a||16&a?he(e,t,r):8192&a?function(e,t,n,o,r){var i=e.children;2===e.childFlags?pe(i,t,r,o,r):ve(i,t,n,o,r)}(e,t,n,o,r):1024&a&&function(e,t,n,o){pe(e.children,e.ref,t,!1,null);var r=P();he(r,n,o),e.dom=r.dom}(e,n,t,r)}function he(e,t,n){var o=e.dom=document.createTextNode(e.children);c(t)||g(t,o,n)}function ge(e,t){e.textContent=t}function ve(e,t,n,o,r){for(var i=0,a=e.length;i<a;i++){var s=e[i];16384&s.flags&&(e[i]=s=O(s)),pe(s,t,n,o,r)}}function me(e,t,n,o,r,l){var u=t.flags|=16384;e.flags!==u||e.type!==t.type||e.key!==t.key||0!=(2048&u)?16384&e.flags?function(e,t,n,o,r){ae(e),0!=(t.flags&e.flags&2033)?(pe(t,null,o,r,null),function(e,t,n){e.replaceChild(t,n)}(n,t.dom,e.dom)):(pe(t,n,o,r,y(e)),b(e,n))}(e,t,n,o,r):pe(t,n,o,r,l):481&u?function(e,t,n,o,r){var a,s=e.dom,l=e.props,c=t.props,u=!1,d=!1;if(t.dom=s,o=o||(32&r)>0,l!==c){var p=l||f;if((a=c||f)!==f)for(var h in(u=(448&r)>0)&&(d=ne(a)),a){var g=p[h],v=a[h];g!==v&&ue(h,g,v,s,o,d,e)}if(p!==f)for(var m in p)a.hasOwnProperty(m)||i(p[m])||ue(m,p[m],null,s,o,d,e)}var y=t.children,b=t.className,w=t.ref,x=e.ref;e.className!==b&&(i(b)?s.removeAttribute("class"):o?s.setAttribute("class",b):s.className=b);4096&r?function(e,t){e.textContent!==t&&(e.textContent=t)}(s,y):ye(e.childFlags,t.childFlags,e.children,y,s,n,o&&"foreignObject"!==t.type,null,e);u&&ee(r,t,s,a,!1,d);x!==w&&(oe(x),re(w,s))}(e,t,o,r,u):4&u?function(e,t,n,o,r,i){var a=t.children=e.children;if(c(a))return;var l=t.props||f,u=t.ref,p=e.ref,h=a.state;if(a.$UPD=!0,!a.$N){if(s(a.componentWillReceiveProps)){if(a.$BR=!0,a.componentWillReceiveProps(l,o),a.$UN)return;a.$BR=!1}a.$PSS&&(h=d(h,a.$PS),a.$PSS=!1,a.$PS=null)}be(a,h,l,n,o,r,!1,i),p!==u&&(oe(p),re(u,a));a.$UPD=!1}(e,t,n,o,r,l):8&u?function(e,t,n,o,r,a){var l=!0,c=t.props||f,u=t.ref,d=e.props,p=!i(u),h=e.children;p&&s(u.onComponentShouldUpdate)&&(l=u.onComponentShouldUpdate(d,c));if(!1!==l){p&&s(u.onComponentWillUpdate)&&u.onComponentWillUpdate(d,c);var g=fe(t.type(c,o));me(h,g,n,o,r,a),t.children=g,p&&s(u.onComponentDidUpdate)&&u.onComponentDidUpdate(d,c)}else t.children=h}(e,t,n,o,r,l):16&u?function(e,t){var n=t.children,o=e.dom;n!==e.children&&(o.nodeValue=n);t.dom=o}(e,t):512&u?t.dom=e.dom:8192&u?function(e,t,n,o,r){var i=e.children,a=null;0==(2&t.childFlags)&&t.children.length>i.length&&(a=y(i[i.length-1]).nextSibling);ye(e.childFlags,t.childFlags,i,t.children,n,o,r,a,e)}(e,t,n,o,r):function(e,t,n){var o=e.ref,r=t.ref,i=t.children;if(ye(e.childFlags,t.childFlags,e.children,i,o,n,!1,null,e),t.dom=e.dom,o!==r&&!a(i)){var s=i.dom;v(o,s),h(r,s)}}(e,t,o)}function ye(e,t,n,o,r,i,a,s,l){switch(e){case 2:switch(t){case 2:me(n,o,r,i,a,s);break;case 1:ie(n,r);break;case 16:ae(n),ge(r,o);break;default:!function(e,t,n,o,r){ae(e),ve(t,n,o,r,y(e)),b(e,n)}(n,o,r,i,a)}break;case 1:switch(t){case 2:pe(o,r,i,a,s);break;case 1:break;case 16:ge(r,o);break;default:ve(o,r,i,a,s)}break;case 16:switch(t){case 16:!function(e,t,n){e!==t&&(""!==e?n.firstChild.nodeValue=t:n.textContent=t)}(n,o,r);break;case 2:le(r),pe(o,r,i,a,s);break;case 1:le(r);break;default:le(r),ve(o,r,i,a,s)}break;default:switch(t){case 16:se(n),ge(r,o);break;case 2:ce(r,l,n),pe(o,r,i,a,s);break;case 1:ce(r,l,n);break;default:var c=n.length,u=o.length;0===c?u>0&&ve(o,r,i,a,s):0===u?ce(r,l,n):8===t&&8===e?function(e,t,n,o,r,i,a,s,l){var c,u,d=i-1,f=a-1,p=0,h=0,g=e[h],v=t[h];e:{for(;g.key===v.key;){if(16384&v.flags&&(t[h]=v=O(v)),me(g,v,n,o,r,s),e[h]=v,++h>d||h>f)break e;g=e[h],v=t[h]}for(g=e[d],v=t[f];g.key===v.key;){if(16384&v.flags&&(t[f]=v=O(v)),me(g,v,n,o,r,s),e[d]=v,f--,h>--d||h>f)break e;g=e[d],v=t[f]}}if(h>d){if(h<=f)for(u=(c=f+1)<a?y(t[c]):s;h<=f;)16384&(v=t[h]).flags&&(t[h]=v=O(v)),h++,pe(v,n,o,r,u)}else if(h>f)for(;h<=d;)ie(e[h++],n);else{for(var m=h,b=h,x=d-h+1,k=f-h+1,N=[];p++<=k;)N.push(0);var S=x===i,C=!1,$=0,U=0;if(a<4||(x|k)<32)for(p=m;p<=d;p++)if(g=e[p],U<k){for(h=b;h<=f;h++)if(v=t[h],g.key===v.key){if(N[h-b]=p+1,S)for(S=!1;m<p;)ie(e[m++],n);$>h?C=!0:$=h,16384&v.flags&&(t[h]=v=O(v)),me(g,v,n,o,r,s),U++;break}!S&&h>f&&ie(g,n)}else S||ie(g,n);else{var M={};for(p=b;p<=f;p++)M[t[p].key]=p;for(p=m;p<=d;p++)if(g=e[p],U<k)if(void 0!==(h=M[g.key])){if(S)for(S=!1;p>m;)ie(e[m++],n);v=t[h],N[h-b]=p+1,$>h?C=!0:$=h,16384&v.flags&&(t[h]=v=O(v)),me(g,v,n,o,r,s),U++}else S||ie(g,n);else S||ie(g,n)}if(S)ce(n,l,e),ve(t,n,o,r,s);else if(C){var P=function(e){var t,n,o,r,i,a=e.slice(),s=[0],l=e.length;for(t=0;t<l;t++){var c=e[t];if(0!==c){if(n=s[s.length-1],e[n]<c){a[t]=n,s.push(t);continue}for(o=0,r=s.length-1;o<r;)e[s[i=(o+r)/2|0]]<c?o=i+1:r=i;c<e[s[o]]&&(o>0&&(a[t]=s[o-1]),s[o]=t)}}o=s.length,r=s[o-1];for(;o-- >0;)s[o]=r,r=a[r];return s}(N);for(h=P.length-1,p=k-1;p>=0;p--)0===N[p]?(16384&(v=t[$=p+b]).flags&&(t[$]=v=O(v)),pe(v,n,o,r,(c=$+1)<a?y(t[c]):s)):h<0||p!==P[h]?w(v=t[$=p+b],n,(c=$+1)<a?y(t[c]):s):h--}else if(U!==k)for(p=k-1;p>=0;p--)0===N[p]&&(16384&(v=t[$=p+b]).flags&&(t[$]=v=O(v)),pe(v,n,o,r,(c=$+1)<a?y(t[c]):s))}}(n,o,r,i,a,c,u,s,l):function(e,t,n,o,r,i,a,s){for(var l,c,u=i>a?a:i,d=0;d<u;d++)l=t[d],c=e[d],16384&l.flags&&(l=t[d]=O(l)),me(c,l,n,o,r,s),e[d]=l;if(i<a)for(d=u;d<a;d++)16384&(l=t[d]).flags&&(l=t[d]=O(l)),pe(l,n,o,r,s);else if(i>a)for(d=u;d<i;d++)ie(e[d],n)}(n,o,r,i,a,c,u,s)}}}function be(e,t,n,o,r,i,a,l){var c=e.state,u=e.props,f=Boolean(e.$N),h=s(e.shouldComponentUpdate);if(f&&(t=x(e,n,t!==c?d(c,t):t)),a||!h||h&&e.shouldComponentUpdate(n,t,r)){!f&&s(e.componentWillUpdate)&&e.componentWillUpdate(n,t,r),e.props=n,e.state=t,e.context=r;var g=null,v=de(e,n,r);f&&s(e.getSnapshotBeforeUpdate)&&(g=e.getSnapshotBeforeUpdate(u,c)),me(e.$LI,v,o,e.$CX,i,l),e.$LI=v,s(e.componentDidUpdate)&&function(e,t,n,o){p.push(function(){return e.componentDidUpdate(t,n,o)})}(e,u,c,g)}else e.props=n,e.state=t,e.context=r}"undefined"!=typeof document&&document.body;function we(e,t,n,o){!function(e,t,n,o){var r=t.$V;i(r)?i(e)||(16384&e.flags&&(e=O(e)),pe(e,t,o||f,!1,null),t.$V=e,r=e):i(e)?(ie(r,t),t.$V=null):(16384&e.flags&&(e=O(e)),me(r,e,t,o||f,!1,null),r=t.$V=e),p.length>0&&m(p),s(n)&&n(),s(k.renderComplete)&&k.renderComplete(r,t)}(e,t,n,o)}var xe=[],ke="undefined"!=typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout.bind(window);function Ne(e,t,n,o){s(t)&&(t=t(e.state,e.props,e.context));var r=e.$PS;if(i(r))e.$PS=t;else for(var a in t)r[a]=t[a];if(e.$PSS||e.$BR)e.$PSS=!0,e.$BR&&s(n)&&p.push(n.bind(e));else if(e.$UPD){if(1===xe.push(e)&&ke(Ce),s(n)){var l=e.$QU;l||(l=e.$QU=[]),l.push(n)}}else e.$PSS=!0,e.$UPD=!0,0===xe.length?$e(e,o,n):xe.push(e)}function Se(e){for(var t=e.$QU,n=0,o=t.length;n<o;n++)t[n].call(e);e.$QU=null}function Ce(){for(var e;e=xe.pop();){$e(e,!1,e.$QU?Se.bind(null,e):null)}}function $e(e,t,n){if(!e.$UN){if(t||!e.$BR){e.$PSS=!1;var o=e.$PS;e.$PS=null,e.$UPD=!0,be(e,d(e.state,o),e.props,y(e.$LI).parentNode,e.context,!1,t,null),e.$UPD=!1,p.length>0&&m(p)}else e.state=e.$PS,e.$PS=null;s(n)&&n.call(e)}}var Ue=function(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.$N=!1,this.props=e||f,this.context=t||f};Ue.prototype.forceUpdate=function(e){this.$UN||Ne(this,{},e,!0)},Ue.prototype.setState=function(e,t){this.$UN||this.$BS||Ne(this,e,t,!1)},Ue.prototype.render=function(e,t,n){return null};var Me=n(0),Oe=n.n(Me);n(1);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Le(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),e}function De(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?Be(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ee=function e(t,n){Te(this,e),this.car=t,this.cdr=n,this.id=Oe()()};function Ae(){return C(1,"div","null-ptr",C(32,"svg",null,[C(32,"line",null,null,1,{x1:"0",y1:"0",x2:"20",y2:"20"}),C(32,"line",null,null,1,{x1:"0",y1:"20",x2:"20",y2:"0"})],4,{width:"20",height:"20"}),2)}function qe(){return C(1,"div","downwards-arrow",C(32,"svg",null,C(32,"path",null,null,1,{d:"m10 0l5 7l5-7l-5 3z",fill:"black"}),2,{width:"30",height:"7"}),2)}function Ve(){return C(1,"div","rightwards-arrow",C(32,"svg",null,C(32,"path",null,null,1,{d:"m0 5l7 5l-7 5l3-5z",fill:"black"}),2,{width:"7",height:"20"}),2)}var Xe=function(e){function t(e){var n;return Te(this,t),(n=De(this,Fe(t).call(this,e))).state={editable:!1},n.checkCancelOrConfirm=n.checkCancelOrConfirm.bind(Be(Be(n))),n.cancel=n.cancel.bind(Be(Be(n))),n.edit=n.edit.bind(Be(Be(n))),n}return Re(t,Ue),Le(t,[{key:"componentDidMount",value:function(){null==this.props.thing&&this.setState({editable:!0})}},{key:"checkCancelOrConfirm",value:function(e){"Enter"==e.code?(this.props.change(e.target.value),this.cancel()):"Escape"==e.code&&this.cancel()}},{key:"cancel",value:function(){this.setState({editable:!1})}},{key:"edit",value:function(e){e.stopPropagation(),this.setState({editable:!0})}},{key:"renderInner",value:function(){var e=this;return this.state.editable?C(64,"input",null,null,1,{type:"text",onKeyDown:function(t){return e.checkCancelOrConfirm(t)},onFocusOut:this.cancel,defaultValue:this.props.thing},null,function(e){return e&&(e.focus()||e.select())}):C(1,"span",null,this.props.thing,0)}},{key:"render",value:function(){return C(1,"div","changeable-text",this.renderInner(),0,{onDblClick:this.edit})}}]),t}(),_e=function(e){function t(e){var n;return Te(this,t),(n=De(this,Fe(t).call(this,e))).changeCar=n.changeCar.bind(Be(Be(n))),n.deleteNode=n.deleteNode.bind(Be(Be(n))),n.condRenderCar=n.condRenderCar.bind(Be(Be(n))),n.condRenderCdr=n.condRenderCdr.bind(Be(Be(n))),n.mouseOverCar=n.mouseOver.bind(Be(Be(n)),!0),n.mouseOverCdr=n.mouseOver.bind(Be(Be(n)),!1),n.mouseOut=n.mouseOut.bind(Be(Be(n))),n}return Re(t,Ue),Le(t,[{key:"changeCar",value:function(e){var t=this.props.node;t.car=void 0!==e?e:t.car,this.props.updateNode(t)}},{key:"deleteNode",value:function(){null==this.props.node.cdr&&this.props.deleteNode(this.props.node)}},{key:"condRenderCar",value:function(e){return e instanceof Ee?void 0:$(2,Xe,{thing:e,change:this.changeCar})}},{key:"condRenderCdr",value:function(e){return $(2,e instanceof Ee?Ve:Ae)}},{key:"mouseOver",value:function(e,t){if(e)document.querySelector('[data-car-id="'.concat(this.props.node.id,'"]')).classList.add("output-highlighted");else{var n,o=this.props.node.cdr;n=null!=o?o.id:this.props.node.id+"-empty",document.querySelector('[data-cdr-id="'.concat(n,'"]')).classList.add("output-highlighted")}}},{key:"mouseOut",value:function(e){(document.querySelector(".output-highlighted")||document.body).classList.remove("output-highlighted")}},{key:"render",value:function(){var e=this.props.node;return C(1,"div","boxy-wrapper",[C(1,"div","boxy",[C(1,"div","boxy-car",this.condRenderCar(e.car),0,{onMouseOver:this.mouseOverCar,onMouseOut:this.mouseOut}),C(1,"div","boxy-cdr",this.condRenderCdr(e.cdr),0,{onMouseOver:this.mouseOverCdr,onMouseOut:this.mouseOut,onClick:this.deleteNode}),e.car instanceof Ee&&$(2,qe),e.cdr instanceof Ee&&$(2,t,{node:e.cdr,updateNode:this.props.updateNode,deleteNode:this.props.deleteNode})],0),e.car instanceof Ee&&$(2,t,{node:e.car,updateNode:this.props.updateNode,deleteNode:this.props.deleteNode})],0,{"data-node-id":e.id})}}]),t}(),Ye=function(e){function t(e){var n;return Te(this,t),(n=De(this,Fe(t).call(this,e))).state={nodes:e.nodes||[],allNodes:e.allNodes||[],draggingId:null,draggingEl:null,draggingNode:null,dragging:!1,renderMode:"cons"},n.addNewNode=n.addNewNode.bind(Be(Be(n))),n.getNodeFromId=n.getNodeFromId.bind(Be(Be(n))),n.getNodeIndex=n.getNodeIndex.bind(Be(Be(n))),n.updateNode=n.updateNode.bind(Be(Be(n))),n.deleteNode=n.deleteNode.bind(Be(Be(n))),n.changeTextRenderMode=n.changeTextRenderMode.bind(Be(Be(n))),n.renderText=n.renderText.bind(Be(Be(n))),n.startDragging=n.startDragging.bind(Be(Be(n))),n.isDragging=n.isDragging.bind(Be(Be(n))),n.stopDragging=n.stopDragging.bind(Be(Be(n))),n.mouseMove=n.mouseMove.bind(Be(Be(n))),n.mouseOut=n.mouseOut.bind(Be(Be(n))),n}return Re(t,Ue),Le(t,[{key:"addNewNode",value:function(){var e=this.state,t=e.nodes,n=e.allNodes,o=new Ee(null,null);n.push(o),t.push(n.length-1),this.setState({nodes:t,allNodes:n})}},{key:"getNodeFromId",value:function(e){return this.state.allNodes.filter(function(t){return t.id===e})[0]}},{key:"getNodeIndex",value:function(e){return this.state.allNodes.findIndex(function(t){return t.id===e.id})}},{key:"updateNode",value:function(e){var t=this.state.allNodes;t[this.getNodeIndex(e)]=e,this.setState({allNodes:t})}},{key:"deleteNode",value:function(e){var t=this,n=this.state,o=n.nodes,r=n.allNodes,i=this.state.allNodes.filter(function(t){return null!=t.cdr&&t.cdr.id===e.id});if(e.car instanceof Ee)alert("Can't delete; first is a list");else if(confirm("Are you sure you want to delete this node?")){var a=this.getNodeIndex(e),s=o.map(function(e){return r[e]});r.splice(a,1),o=s.filter(function(t){return t.id!==e.id}).map(function(e){return t.getNodeIndex(e)}),i.length&&(i[0].cdr=null),this.setState({nodes:o,allNodes:r})}}},{key:"changeTextRenderMode",value:function(e){this.setState({renderMode:e.target.value})}},{key:"renderText",value:function(){var e=this;switch(this.state.renderMode){case"cons":return this.state.nodes.map(function(t){return function e(t,n){return null==t?"empty":'(cons <span data-car-id="'.concat(t.id,'">').concat(t.car instanceof Ee?e(t.car,n+1):null==t.car?'""':/^\d+$|^'[\S]+$/.test(t.car)?t.car:'"'.concat(t.car,'"'),"</span>").concat(null==t.cdr?" ":"\n"+" ".repeat(6*n),'<span data-cdr-id="').concat(null!=t.cdr?t.cdr.id:t.id+"-empty",'">').concat(e(t.cdr,n+1),"</span>)")}(e.state.allNodes[t],1)}).join("\n\n");case"list":return this.state.nodes.map(function(t){return'(list <span data-car-id="'.concat(e.state.allNodes[t].id,'">').concat(function e(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==t?"":(o.push((t.car instanceof Ee?"".concat(r?"":"\n"+" ".repeat(6*n),'<span data-car-id="').concat(t.id,'">(list ').concat(e(t.car,n+1,[],!0).join(" ").replace(/\s+<\//g,"</"),")</span>\n").concat(" ".repeat(6*n-1)):'<span data-car-id="'.concat(t.id,'">').concat(null==t.car?'""':/^\d+$|^'[\S]+$/.test(t.car)?t.car:'"'.concat(t.car,'"'),"</span>"))+'<span data-cdr-id="'.concat(null!=t.cdr?t.cdr.id:t.id+"-empty",'">')),e(t.cdr,n,o),o.push("</span>"),o)}(e.state.allNodes[t],1,[],!0).join(" ").replace(/\s+<\//g,"</"),"</span>)")}).join("\n\n");case"quot":return this.state.nodes.map(function(t){return"'(<span data-car-id=\"".concat(e.state.allNodes[t].id,'">').concat(function e(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null==t?"":(o.push((t.car instanceof Ee?"".concat(r?"":"\n"+" ".repeat(2*n),'<span data-car-id="').concat(t.id,'">(').concat(e(t.car,n+1,[],!0).join(" ").replace(/\s+<\//g,"</"),")</span>\n").concat(" ".repeat(2*n-1)):'<span data-car-id="'.concat(t.id,'">').concat(null==t.car?'""':/^\d+$/.test(t.car)?t.car:/^'[\S]+$/.test(t.car)?t.car.slice(1):'"'.concat(t.car,'"'),"</span>"))+'<span data-cdr-id="'.concat(null!=t.cdr?t.cdr.id:t.id+"-empty",'">')),e(t.cdr,n,o),o.push("</span>"),o)}(e.state.allNodes[t],1,[],!0).join(" ").replace(/\s+<\//g,"</"),"</span>)")}).join("\n\n")}}},{key:"startDragging",value:function(e){1===e.buttons&&e.target.closest(".boxy-wrapper")&&this.setState({mouseX:e.clientX,mouseY:e.clientY,draggingId:e.target.closest(".boxy-wrapper").dataset.nodeId})}},{key:"isDragging",value:function(e){var t=this;if(this.state.dragging&&this.state.draggingEl&&1===e.buttons){var n=this.state.draggingBoundingBoxes.filter(function(t){return t[2]<=e.clientX&&e.clientX<=t[4]&&t[1]<=e.clientY&&e.clientY<=t[3]&&!t[0].closest(".dragging")}),o=n.length?n[0][0]:null;this.state.draggingEl.style.left="".concat(e.clientX-this.state.offsetX,"px"),this.state.draggingEl.style.top="".concat(e.clientY-this.state.offsetY,"px"),(document.querySelector(".drag-active")||document.body).classList.remove("drag-active"),o&&o.classList.add("drag-active")}else if(this.state.draggingId&&1===e.buttons&&(Math.abs(this.state.mouseX-e.clientX)>5||Math.abs(this.state.mouseY-e.clientY)>5)){var r=document.querySelector('[data-node-id="'.concat(this.state.draggingId,'"]')),i=this.state.mouseY-r.getBoundingClientRect().top;r.classList.add("dragging"),r.style.left="".concat(e.clientX- -10,"px"),r.style.top="".concat(e.clientY-i,"px"),this.setState(function(e){return{mouseX:null,mouseY:null,offsetX:-10,offsetY:i,draggingEl:r,draggingNode:t.getNodeFromId(e.draggingId),draggingBoundingBoxes:Array.from(document.querySelectorAll(".boxy-car, .boxy-cdr")).map(function(e){var t=e.getBoundingClientRect();return[e,t.top,t.left,t.top+t.height,t.left+t.width]}),dragging:!0}})}}},{key:"stopDragging",value:function(e){var t=this,n=this.state.draggingEl;if(n){var o=document.querySelector(".add-to-nodes").getBoundingClientRect(),r=[o.top,o.left,o.top+o.height,o.left+o.width],i=this.state.draggingBoundingBoxes.filter(function(t){return t[2]<=e.clientX&&e.clientX<=t[4]&&t[1]<=e.clientY&&e.clientY<=t[3]&&!t[0].closest(".dragging")}),a=i.length?i[0][0]:null;if(a){var s=a.classList.contains("boxy-cdr"),l=a.closest(".boxy-wrapper").dataset.nodeId,c=this.state.allNodes.filter(function(e){return e.cdr&&e.cdr.id===t.state.draggingId}),u=this.state.allNodes.filter(function(e){return e.car instanceof Ee&&e.car.id===t.state.draggingId}),d=this.getNodeFromId(l),f=this.state,p=f.nodes,h=f.allNodes;if(c.length&&(c[0].cdr=null),u.length&&(u[0].car=null),s)d.cdr instanceof Ee&&p.push(this.getNodeIndex(d.cdr)),d.cdr=this.state.draggingNode;else{if(d.car instanceof Ee)p.push(this.getNodeIndex(d.car));else if(null!=d.car){var g=new Ee(d.car,null);h.push(g),p.push(h.length-1)}d.car=this.state.draggingNode}var v=this.getNodeIndex(this.state.draggingNode);p=p.filter(function(e){return e!==v}),this.setState({nodes:p,allNodes:h})}else if(!this.state.nodes.includes(this.getNodeIndex(this.state.draggingNode))&&r[1]<=e.clientX&&e.clientX<=r[3]&&r[0]<=e.clientY&&e.clientY<=r[2]){var m=this.state.allNodes.filter(function(e){return e.cdr&&e.cdr.id===t.state.draggingId}),y=this.state.allNodes.filter(function(e){return e.car instanceof Ee&&e.car.id===t.state.draggingId}),b=this.state.nodes;m.length&&(m[0].cdr=null),y.length&&(y[0].car=null),b.push(this.getNodeIndex(this.state.draggingNode)),this.setState({nodes:b})}(document.querySelector(".drag-active")||document.body).classList.remove("drag-active"),n.classList.remove("dragging"),n.style.top=null,n.style.left=null}this.state.dragging&&this.setState({draggingId:null,draggingEl:null,draggingNode:null,dragging:!1})}},{key:"mouseMove",value:function(e){if(e.stopPropagation(),(document.querySelector(".view-highlighted")||document.body).classList.remove("view-highlighted"),(document.querySelector(".view-outlined")||document.body).classList.remove("view-outlined"),(document.querySelector(".output-highlighted")||document.body).classList.remove("output-highlighted"),(document.querySelector(".output-outlined")||document.body).classList.remove("output-outlined"),"SPAN"===e.target.tagName){var t=e.target;if(t.dataset.carId)document.querySelector('[data-node-id="'.concat(t.dataset.carId,'"] .boxy-car')).classList.add("view-highlighted"),t.classList.add("output-highlighted");else if(t.dataset.cdrId){var n='[data-node-id="'.concat(t.dataset.cdrId,'"]');/-empty/.test(t.dataset.cdrId)?(n=n.replace("-empty","")+" .boxy-cdr",document.querySelector(n).classList.add("view-highlighted"),t.classList.add("output-highlighted")):(document.querySelector(n).classList.add("view-outlined"),t.classList.add("output-outlined"))}}}},{key:"mouseOut",value:function(){(document.querySelector(".view-highlighted")||document.body).classList.remove("view-highlighted"),(document.querySelector(".view-outlined")||document.body).classList.remove("view-outlined"),(document.querySelector(".output-highlighted")||document.body).classList.remove("output-highlighted"),(document.querySelector(".output-outlined")||document.body).classList.remove("output-outlined")}},{key:"render",value:function(){var e=this;return M([C(1,"div","app-main",[this.state.nodes.map(function(t){return $(2,_e,{node:e.state.allNodes[t],updateNode:e.updateNode,deleteNode:e.deleteNode})}),this.state.dragging&&C(1,"em","add-to-nodes","make separate list",16)],0,{onDblClick:this.addNewNode,onMouseDown:this.startDragging,onMouseMove:this.isDragging,onMouseUp:this.stopDragging}),C(1,"div","app-output",[C(256,"select",null,["cons","list","quot"].map(function(t){return C(1,"option",null,[U("("),t,U(" ...)")],0,{value:t,checked:e.state.renderMode===t})}),0,{onChange:this.changeTextRenderMode}),C(1,"pre",null,null,1,{onMouseMove:this.mouseMove,onMouseOut:this.mouseOut,dangerouslySetInnerHTML:{__html:this.renderText()}})],4)],4)}}]),t}(),We=new Ee("A",null),He=new Ee("B",We),Ke=new Ee("C",He),Qe=new Ee("D",null),ze=new Ee(Ke,Qe),Ge=new Ee("E",ze),Je=new Ee("F",null),Ze=new Ee("G",Je);we($(2,Ye,{nodes:[8],allNodes:[We,He,Ke,Qe,ze,Ge,Je,Ze,new Ee(Ze,Ge)]}),document.querySelector("body"))}]);